!function(){"use strict";var e,t={344:function(){function e(e){return document.querySelector(e)}function t(e){return document.querySelectorAll(e)}function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=document.createElement(e);return t&&(n.textContent=t),n}function a(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}document.addEventListener("DOMContentLoaded",(function(){var r=t(".step"),c=t(".next"),o=t(".prev"),i=(t("[data-step]"),t(".nav-btn")),l=e("#toggle"),s=e("[name='name']");s.value=JSON.parse(localStorage.getItem("nameInput"));var u=e("[name='email']");u.value=JSON.parse(localStorage.getItem("emailInput"));var d=e("[name='phone']");d.value=JSON.parse(localStorage.getItem("phoneInput"));var f=a(t("input[name='plan']")),p=a(t(".plan-label")),v=(a(t(".plan-price")),e(".monthly-description")),m=e(".yearly-description"),h=a(t(".discount")),y="mo",g=t("input[name='add-on']"),E=(a(t("[name='add-on']:checked")),e(".summary-addon-list")),S="monthly",k=JSON.parse(localStorage.getItem("currentStep"))||0;function x(e){r.forEach((function(t,n){n===e?t.classList.add("active"):t.classList.remove("active")}))}function L(){i.forEach((function(e,t){t===k?e.classList.add("active"):e.classList.remove("active"),k===r.length-1&&(i[i.length-1].style.backgroundColor="hsl(228, 100%, 84%)")}))}function C(){k>0&&(x(--k),L(),localStorage.setItem("currentStep",JSON.stringify(k)))}function I(){f.forEach((function(e){"archade"===e.id?(e.value="yearly"===S?90:9,e.nextElementSibling.textContent="$".concat(e.value,"/").concat(y)):"advance"===e.id?(e.value="yearly"===S?120:12,e.nextElementSibling.textContent="$".concat(e.value,"/").concat(y)):"pro"===e.id&&(e.value="yearly"===S?150:15,e.nextElementSibling.textContent="$".concat(e.value,"/").concat(y)),e.addEventListener("click",(function(){e.checked?e.parentElement.classList.add("selected-plan"):e.parentElement.classList.remove("selected-plan")}))})),"yearly"===S?(v.classList.remove("active"),m.classList.add("active"),h.forEach((function(e){e.textContent="2 months free"}))):(m.classList.remove("active"),v.classList.add("active"),h.forEach((function(e){e.textContent=""})))}function O(){var t=e(".summary-plan-title"),n=e(".summary-plan-price"),a=e(".summary-plan-change-link");f.forEach((function(e){if(e.checked){var a=e.parentElement.parentElement,r=a.querySelector(".plan-title"),c=a.querySelector(".plan-price");t.textContent="".concat(r.textContent," (").concat(S,")"),n.textContent="".concat(c.textContent)}})),a.addEventListener("click",(function(){x(k=1),localStorage.setItem("currentStep",JSON.stringify(k))}))}function b(){g.forEach((function(t){var a=t.parentElement,r=a.querySelector(".addon-title"),c=a.querySelector(".addon-price"),o=n("li"),i="".concat(t.id,"summary");o.id=i;var l=e("#".concat(i));o.classList.add("flex","item-center","justify-between"),o.innerHTML='\n                <span class="text-sm text-gray-700">'.concat(r.textContent,'</span>\n                <span class="text-sm">').concat(c.textContent,"</span>\n            "),t.checked&&!l?E.append(o):!t.checked&&l&&l.remove()}))}function J(){var e=0;return f.forEach((function(t){t.checked&&"archade"===t.id?e="yearly"===S?90:9:t.checked&&"advance"===t.id?e="yearly"===S?120:12:t.checked&&"pro"===t.id&&(e="yearly"===S?150:15)})),e}f.forEach((function(e,t){e.checked=JSON.parse(localStorage.getItem("planInput".concat(t)))})),g.forEach((function(e,t){e.checked=JSON.parse(localStorage.getItem("addonInput".concat(t)))}));var N=J();function j(){var e=0;return g.forEach((function(t){t.checked&&"service"===t.id?e+="yearly"===S?10:1:!t.checked||"storage"!==t.id&&"profile"!==t.id||(e+="yearly"===S?20:2)})),e}var q=j(),w=N+q;function A(){var t=e(".total-title");t.classList.add("text-sm");var n=e(".total-price");n.classList.add("text-lg","font-bold","text-[hsl(243,_100%,_62%)]"),t.textContent="Total (per ".concat(S.slice(0,-2),")"),n.textContent="$".concat(w,"/").concat(y)}x(k),L(),I(),O(),b(),o.forEach((function(e){e.addEventListener("click",C)})),c.forEach((function(t){t.addEventListener("click",(function(){(function(){if(0===k&&(""===s.value||""===u.value||""===d.value)){var t=n("p");t.classList.add("absolute","text-red-700","-top-5","left-0"),t.id="invalid-message1";var a=e("#invalid-message1");t.textContent="All fields are required";var r=e("#step1").querySelector(".input-wrapper");return a||r.append(t),setTimeout((function(){t.remove()}),5e3),!1}if(1===k&&!f[0].checked&&!f[1].checked&&!f[2].checked){var c=n("p");c.classList.add("absolute","text-red-700","-top-5","left-0"),c.id="invalid-message2";var o=e("#invalid-message2");c.textContent="You didn't choose any plan";var i=e("#step2").querySelector(".input-wrapper");return o||i.append(c),setTimeout((function(){c.remove()}),5e3),!1}return!0})()&&(1===k&&f.forEach((function(e,t){localStorage.setItem("planInput".concat(t),JSON.stringify(!0===e.checked))})),2===k&&g.forEach((function(e,t){localStorage.setItem("addonInput".concat(t),JSON.stringify(!0===e.checked))})),k<r.length-1&&(x(++k),L(),localStorage.setItem("currentStep",JSON.stringify(k))))}))})),s.addEventListener("keyup",(function(){localStorage.setItem("nameInput",JSON.stringify(s.value))})),u.addEventListener("keyup",(function(){localStorage.setItem("emailInput",JSON.stringify(u.value))})),d.addEventListener("keyup",(function(){localStorage.setItem("phoneInput",JSON.stringify(d.value))})),f.forEach((function(e){e.addEventListener("click",(function(){O(),N=J(),w=N+q,A();var t=e.parentElement.parentElement;p.forEach((function(e){e.classList.remove("active")})),e.checked&&t.classList.add("active")}))})),g.forEach((function(e){e.addEventListener("click",(function(){O(),b(),q=j(),w=N+q,A()}))})),c.forEach((function(e){e.addEventListener("click",(function(){1===k&&(I(),O(),b())}))})),l.addEventListener("change",(function(e){for(S=toggle.checked?"yearly":"monthly",y="yearly"===S?"yr":"mo",I(),g.forEach((function(e){"service"===e.id?(e.value="yearly"===S?10:1,e.parentElement.lastElementChild.textContent="$".concat(e.value,"/").concat(y)):("storage"===e.id||"profile"===e.id)&&(e.value="yearly"===S?20:2,e.parentElement.lastElementChild.textContent="$".concat(e.value,"/").concat(y))})),O();E.firstElementChild;)E.removeChild(E.firstElementChild);b(),N=J(),q=j(),w=N+q,A()})),k===r.length-1&&localStorage.clear()}))}},n={};function a(e){var r=n[e];if(void 0!==r)return r.exports;var c=n[e]={exports:{}};return t[e](c,c.exports,a),c.exports}a.m=t,e=[],a.O=function(t,n,r,c){if(!n){var o=1/0;for(u=0;u<e.length;u++){n=e[u][0],r=e[u][1],c=e[u][2];for(var i=!0,l=0;l<n.length;l++)(!1&c||o>=c)&&Object.keys(a.O).every((function(e){return a.O[e](n[l])}))?n.splice(l--,1):(i=!1,c<o&&(o=c));if(i){e.splice(u--,1);var s=r();void 0!==s&&(t=s)}}return t}c=c||0;for(var u=e.length;u>0&&e[u-1][2]>c;u--)e[u]=e[u-1];e[u]=[n,r,c]},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={47:0,742:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,c,o=n[0],i=n[1],l=n[2],s=0;if(o.some((function(t){return 0!==e[t]}))){for(r in i)a.o(i,r)&&(a.m[r]=i[r]);if(l)var u=l(a)}for(t&&t(n);s<o.length;s++)c=o[s],a.o(e,c)&&e[c]&&e[c][0](),e[c]=0;return a.O(u)},n=self.webpackChunksample_projects=self.webpackChunksample_projects||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var r=a.O(void 0,[742],(function(){return a(344)}));r=a.O(r)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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eEcsRUFBVyxDQUFDLE1BQU0sV0FBYSxPQUFPaUcsRUFBb0IsSUFBTSxJQUNoSHlDLEVBQXNCekMsRUFBb0JPLEVBQUVrQyxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2FtcGxlLXByb2plY3RzL3dlYnBhY2svcnVudGltZS9jaHVuayBsb2FkZWQiLCJ3ZWJwYWNrOi8vc2FtcGxlLXByb2plY3RzLy4vc3JjL3NjcmlwdHMvbGlianMvZnVuY3Rpb25zLmpzIiwid2VicGFjazovL3NhbXBsZS1wcm9qZWN0cy8uL3NyYy9zY3JpcHRzL2ZlbS9mZW0tYWR2LW11bHRpLWZvcm0uanMiLCJ3ZWJwYWNrOi8vc2FtcGxlLXByb2plY3RzL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3NhbXBsZS1wcm9qZWN0cy93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3NhbXBsZS1wcm9qZWN0cy93ZWJwYWNrL3J1bnRpbWUvanNvbnAgY2h1bmsgbG9hZGluZyIsIndlYnBhY2s6Ly9zYW1wbGUtcHJvamVjdHMvd2VicGFjay9zdGFydHVwIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBkZWZlcnJlZCA9IFtdO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5PID0gZnVuY3Rpb24ocmVzdWx0LCBjaHVua0lkcywgZm4sIHByaW9yaXR5KSB7XG5cdGlmKGNodW5rSWRzKSB7XG5cdFx0cHJpb3JpdHkgPSBwcmlvcml0eSB8fCAwO1xuXHRcdGZvcih2YXIgaSA9IGRlZmVycmVkLmxlbmd0aDsgaSA+IDAgJiYgZGVmZXJyZWRbaSAtIDFdWzJdID4gcHJpb3JpdHk7IGktLSkgZGVmZXJyZWRbaV0gPSBkZWZlcnJlZFtpIC0gMV07XG5cdFx0ZGVmZXJyZWRbaV0gPSBbY2h1bmtJZHMsIGZuLCBwcmlvcml0eV07XG5cdFx0cmV0dXJuO1xuXHR9XG5cdHZhciBub3RGdWxmaWxsZWQgPSBJbmZpbml0eTtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBkZWZlcnJlZC5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBjaHVua0lkcyA9IGRlZmVycmVkW2ldWzBdO1xuXHRcdHZhciBmbiA9IGRlZmVycmVkW2ldWzFdO1xuXHRcdHZhciBwcmlvcml0eSA9IGRlZmVycmVkW2ldWzJdO1xuXHRcdHZhciBmdWxmaWxsZWQgPSB0cnVlO1xuXHRcdGZvciAodmFyIGogPSAwOyBqIDwgY2h1bmtJZHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdGlmICgocHJpb3JpdHkgJiAxID09PSAwIHx8IG5vdEZ1bGZpbGxlZCA+PSBwcmlvcml0eSkgJiYgT2JqZWN0LmtleXMoX193ZWJwYWNrX3JlcXVpcmVfXy5PKS5ldmVyeShmdW5jdGlvbihrZXkpIHsgcmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18uT1trZXldKGNodW5rSWRzW2pdKTsgfSkpIHtcblx0XHRcdFx0Y2h1bmtJZHMuc3BsaWNlKGotLSwgMSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRmdWxmaWxsZWQgPSBmYWxzZTtcblx0XHRcdFx0aWYocHJpb3JpdHkgPCBub3RGdWxmaWxsZWQpIG5vdEZ1bGZpbGxlZCA9IHByaW9yaXR5O1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZihmdWxmaWxsZWQpIHtcblx0XHRcdGRlZmVycmVkLnNwbGljZShpLS0sIDEpXG5cdFx0XHR2YXIgciA9IGZuKCk7XG5cdFx0XHRpZiAociAhPT0gdW5kZWZpbmVkKSByZXN1bHQgPSByO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gcmVzdWx0O1xufTsiLCJleHBvcnQgZnVuY3Rpb24gc2VsZWN0KGVsZW1lbnQpIHtcclxuICAgIGNvbnN0IHNlbGVjdGVkRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWxlbWVudCk7XHJcbiAgICByZXR1cm4gc2VsZWN0ZWRFbGVtZW50O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2VsZWN0QWxsKGVsZW1lbnRzKSB7XHJcbiAgICBjb25zdCBzZWxlY3RlZEVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChlbGVtZW50cyk7XHJcbiAgICByZXR1cm4gc2VsZWN0ZWRFbGVtZW50cztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZShlbGVtZW50LCB0ZXh0ID0gbnVsbCkge1xyXG4gICAgY29uc3QgY3JlYXRlZEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGVsZW1lbnQpO1xyXG4gICAgaWYgKHRleHQpIHtcclxuICAgICAgICBjcmVhdGVkRWxlbWVudC50ZXh0Q29udGVudCA9IHRleHQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY3JlYXRlZEVsZW1lbnQ7XHJcbn1cclxuIiwiLy8gaW1wb3J0IHsgSW5wdXQgfSBmcm9tIFwicG9zdGNzc1wiO1xyXG5pbXBvcnQgXCIuLi8uLi9zdHlsZXMvbWFpbi5jc3NcIjtcclxuaW1wb3J0ICogYXMgZnVuYyBmcm9tIFwiLi4vbGlianMvZnVuY3Rpb25zXCI7XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyBWYXJpYWJsZXM6IEdlbmVyYWxcclxuICAgIGNvbnN0IHN0ZXBzID0gZnVuYy5zZWxlY3RBbGwoXCIuc3RlcFwiKTtcclxuICAgIGNvbnN0IG5leHRCdG5zID0gZnVuYy5zZWxlY3RBbGwoXCIubmV4dFwiKTtcclxuICAgIGNvbnN0IHByZXZCdG5zID0gZnVuYy5zZWxlY3RBbGwoXCIucHJldlwiKTtcclxuICAgIGNvbnN0IHN0ZXBMaW5rcyA9IGZ1bmMuc2VsZWN0QWxsKFwiW2RhdGEtc3RlcF1cIik7XHJcbiAgICBjb25zdCBuYXZCdG5zID0gZnVuYy5zZWxlY3RBbGwoXCIubmF2LWJ0blwiKTtcclxuICAgIGNvbnN0IHRvZ2dsZUlucHV0ID0gZnVuYy5zZWxlY3QoXCIjdG9nZ2xlXCIpO1xyXG4gICAgLy8gVmFyaWFibGVzOiBpbmZvIFN0ZXAgMVxyXG4gICAgY29uc3QgbmFtZUlucHV0ID0gZnVuYy5zZWxlY3QoXCJbbmFtZT0nbmFtZSddXCIpO1xyXG4gICAgbmFtZUlucHV0LnZhbHVlID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcIm5hbWVJbnB1dFwiKSk7XHJcbiAgICBjb25zdCBlbWFpbElucHV0ID0gZnVuYy5zZWxlY3QoXCJbbmFtZT0nZW1haWwnXVwiKTtcclxuICAgIGVtYWlsSW5wdXQudmFsdWUgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiZW1haWxJbnB1dFwiKSk7XHJcbiAgICBjb25zdCBwaG9uZUlucHV0ID0gZnVuYy5zZWxlY3QoXCJbbmFtZT0ncGhvbmUnXVwiKTtcclxuICAgIHBob25lSW5wdXQudmFsdWUgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwicGhvbmVJbnB1dFwiKSk7XHJcbiAgICAvLyBWYXJpYWJsZXM6IFBsYW4gU3RlcCAyXHJcbiAgICBjb25zdCBwbGFuSW5wdXRzID0gWy4uLmZ1bmMuc2VsZWN0QWxsKFwiaW5wdXRbbmFtZT0ncGxhbiddXCIpXTtcclxuICAgIGNvbnN0IHBsYW5MYWJlbHMgPSBbLi4uZnVuYy5zZWxlY3RBbGwoXCIucGxhbi1sYWJlbFwiKV07XHJcbiAgICBjb25zdCBwbGFuUHJpY2VzID0gWy4uLmZ1bmMuc2VsZWN0QWxsKFwiLnBsYW4tcHJpY2VcIildO1xyXG4gICAgY29uc3QgbW9udGhseURlc2NyaXB0aW9uID0gZnVuYy5zZWxlY3QoXCIubW9udGhseS1kZXNjcmlwdGlvblwiKTtcclxuICAgIGNvbnN0IHllYXJseURlc2NyaXB0aW9uID0gZnVuYy5zZWxlY3QoXCIueWVhcmx5LWRlc2NyaXB0aW9uXCIpO1xyXG4gICAgY29uc3QgZGlzY291bnRzID0gWy4uLmZ1bmMuc2VsZWN0QWxsKFwiLmRpc2NvdW50XCIpXTtcclxuXHJcbiAgICBsZXQgcGVyID0gXCJtb1wiO1xyXG5cclxuICAgIC8vIFZhcmlhYmxlczogQWRkLW9uIFN0ZXAgM1xyXG4gICAgY29uc3QgYWRkb25JbnB1dHMgPSBmdW5jLnNlbGVjdEFsbChcImlucHV0W25hbWU9J2FkZC1vbiddXCIpO1xyXG4gICAgY29uc3QgY2hlY2tlZEFkZG9ucyA9IFsuLi5mdW5jLnNlbGVjdEFsbChcIltuYW1lPSdhZGQtb24nXTpjaGVja2VkXCIpXTtcclxuXHJcbiAgICAvLyBWYXJpYWJsZXM6IFN1bW1hcnkgU3RlcCA0XHJcbiAgICBjb25zdCBzdW1tYXJ5QWRkb25MaXN0ID0gZnVuYy5zZWxlY3QoXCIuc3VtbWFyeS1hZGRvbi1saXN0XCIpO1xyXG5cclxuICAgIGxldCBkdXJhdGlvbiA9IFwibW9udGhseVwiO1xyXG4gICAgbGV0IGN1cnJlbnRTdGVwID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImN1cnJlbnRTdGVwXCIpKSB8fCAwO1xyXG5cclxuICAgIGdldExvY2FsU3RvcmFnZSgpO1xyXG5cclxuICAgIC8vIEZ1bmN0aW9uOiBTaG93IHN0ZXBcclxuICAgIGZ1bmN0aW9uIHNob3dTdGVwKHN0ZXBJbmRleCkge1xyXG4gICAgICAgIHN0ZXBzLmZvckVhY2goKHN0ZXAsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gc3RlcEluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICBzdGVwLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzdGVwLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBGdW5jdGlvbjogVXBkYXRlIE5hdiBCdXR0b25zXHJcbiAgICBmdW5jdGlvbiB1cGRhdGVOYXZCdG5zKCkge1xyXG4gICAgICAgIG5hdkJ0bnMuZm9yRWFjaCgobmF2QnRuLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoaW5kZXggPT09IGN1cnJlbnRTdGVwKSB7XHJcbiAgICAgICAgICAgICAgICBuYXZCdG4uY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG5hdkJ0bi5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50U3RlcCA9PT0gc3RlcHMubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgICAgICAgbmF2QnRuc1tuYXZCdG5zLmxlbmd0aCAtIDFdLnN0eWxlLmJhY2tncm91bmRDb2xvciA9XHJcbiAgICAgICAgICAgICAgICAgICAgXCJoc2woMjI4LCAxMDAlLCA4NCUpXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBGdW5jdGlvbjogTmV4dCBTdGVwXHJcbiAgICBmdW5jdGlvbiBnb1RvTmV4dFN0ZXAoKSB7XHJcbiAgICAgICAgaWYgKGN1cnJlbnRTdGVwIDwgc3RlcHMubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgICBjdXJyZW50U3RlcCsrO1xyXG4gICAgICAgICAgICBzaG93U3RlcChjdXJyZW50U3RlcCk7XHJcbiAgICAgICAgICAgIHVwZGF0ZU5hdkJ0bnMoKTtcclxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJjdXJyZW50U3RlcFwiLCBKU09OLnN0cmluZ2lmeShjdXJyZW50U3RlcCkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBGdW5jdGlvbjogUHJldmlvdXMgU3RlcFxyXG4gICAgZnVuY3Rpb24gZ29Ub1ByZXZpb3VzU3RlcCgpIHtcclxuICAgICAgICBpZiAoY3VycmVudFN0ZXAgPiAwKSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnRTdGVwLS07XHJcbiAgICAgICAgICAgIHNob3dTdGVwKGN1cnJlbnRTdGVwKTtcclxuICAgICAgICAgICAgdXBkYXRlTmF2QnRucygpO1xyXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImN1cnJlbnRTdGVwXCIsIEpTT04uc3RyaW5naWZ5KGN1cnJlbnRTdGVwKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEZ1bmN0aW9uOiBVcGRhdGUgUGxhbiBTdGVwIDJcclxuICAgIGZ1bmN0aW9uIHVwZGF0ZVBsYW5TdGVwKCkge1xyXG4gICAgICAgIHBsYW5JbnB1dHMuZm9yRWFjaCgocGxhbklucHV0KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChwbGFuSW5wdXQuaWQgPT09IFwiYXJjaGFkZVwiKSB7XHJcbiAgICAgICAgICAgICAgICBwbGFuSW5wdXQudmFsdWUgPSBkdXJhdGlvbiA9PT0gXCJ5ZWFybHlcIiA/IDkwIDogOTtcclxuICAgICAgICAgICAgICAgIHBsYW5JbnB1dC5uZXh0RWxlbWVudFNpYmxpbmcudGV4dENvbnRlbnQgPSBgJCR7cGxhbklucHV0LnZhbHVlfS8ke3Blcn1gO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHBsYW5JbnB1dC5pZCA9PT0gXCJhZHZhbmNlXCIpIHtcclxuICAgICAgICAgICAgICAgIHBsYW5JbnB1dC52YWx1ZSA9IGR1cmF0aW9uID09PSBcInllYXJseVwiID8gMTIwIDogMTI7XHJcbiAgICAgICAgICAgICAgICBwbGFuSW5wdXQubmV4dEVsZW1lbnRTaWJsaW5nLnRleHRDb250ZW50ID0gYCQke3BsYW5JbnB1dC52YWx1ZX0vJHtwZXJ9YDtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChwbGFuSW5wdXQuaWQgPT09IFwicHJvXCIpIHtcclxuICAgICAgICAgICAgICAgIHBsYW5JbnB1dC52YWx1ZSA9IGR1cmF0aW9uID09PSBcInllYXJseVwiID8gMTUwIDogMTU7XHJcbiAgICAgICAgICAgICAgICBwbGFuSW5wdXQubmV4dEVsZW1lbnRTaWJsaW5nLnRleHRDb250ZW50ID0gYCQke3BsYW5JbnB1dC52YWx1ZX0vJHtwZXJ9YDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBwbGFuSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChwbGFuSW5wdXQuY2hlY2tlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBsYW5JbnB1dC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RlZC1wbGFuXCIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBwbGFuSW5wdXQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwic2VsZWN0ZWQtcGxhblwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmIChkdXJhdGlvbiA9PT0gXCJ5ZWFybHlcIikge1xyXG4gICAgICAgICAgICBtb250aGx5RGVzY3JpcHRpb24uY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgeWVhcmx5RGVzY3JpcHRpb24uY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgZGlzY291bnRzLmZvckVhY2goKGRpc2NvdW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBkaXNjb3VudC50ZXh0Q29udGVudCA9IFwiMiBtb250aHMgZnJlZVwiO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB5ZWFybHlEZXNjcmlwdGlvbi5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICBtb250aGx5RGVzY3JpcHRpb24uY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgZGlzY291bnRzLmZvckVhY2goKGRpc2NvdW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBkaXNjb3VudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBGdW5jdGlvbjogVXBkYXRlIEFkZG9uIFN0ZXAgM1xyXG4gICAgZnVuY3Rpb24gdXBkYXRlQWRkb25TdGVwKCkge1xyXG4gICAgICAgIGFkZG9uSW5wdXRzLmZvckVhY2goKGFkZG9uSW5wdXQpID0+IHtcclxuICAgICAgICAgICAgaWYgKGFkZG9uSW5wdXQuaWQgPT09IFwic2VydmljZVwiKSB7XHJcbiAgICAgICAgICAgICAgICBhZGRvbklucHV0LnZhbHVlID0gZHVyYXRpb24gPT09IFwieWVhcmx5XCIgPyAxMCA6IDE7XHJcbiAgICAgICAgICAgICAgICBhZGRvbklucHV0LnBhcmVudEVsZW1lbnQubGFzdEVsZW1lbnRDaGlsZC50ZXh0Q29udGVudCA9IGAkJHthZGRvbklucHV0LnZhbHVlfS8ke3Blcn1gO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGFkZG9uSW5wdXQuaWQgPT09IFwic3RvcmFnZVwiKSB7XHJcbiAgICAgICAgICAgICAgICBhZGRvbklucHV0LnZhbHVlID0gZHVyYXRpb24gPT09IFwieWVhcmx5XCIgPyAyMCA6IDI7XHJcbiAgICAgICAgICAgICAgICBhZGRvbklucHV0LnBhcmVudEVsZW1lbnQubGFzdEVsZW1lbnRDaGlsZC50ZXh0Q29udGVudCA9IGAkJHthZGRvbklucHV0LnZhbHVlfS8ke3Blcn1gO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGFkZG9uSW5wdXQuaWQgPT09IFwicHJvZmlsZVwiKSB7XHJcbiAgICAgICAgICAgICAgICBhZGRvbklucHV0LnZhbHVlID0gZHVyYXRpb24gPT09IFwieWVhcmx5XCIgPyAyMCA6IDI7XHJcbiAgICAgICAgICAgICAgICBhZGRvbklucHV0LnBhcmVudEVsZW1lbnQubGFzdEVsZW1lbnRDaGlsZC50ZXh0Q29udGVudCA9IGAkJHthZGRvbklucHV0LnZhbHVlfS8ke3Blcn1gO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRnVuY3Rpb246IFVwZGF0ZSBQbGFuIFN1bW1hcnkgU3RlcCA0XHJcbiAgICBmdW5jdGlvbiB1cGRhdGVQbGFuU3VtbWFyeSgpIHtcclxuICAgICAgICBjb25zdCBzdW1tYXJ5UGxhblRpdGxlID0gZnVuYy5zZWxlY3QoXCIuc3VtbWFyeS1wbGFuLXRpdGxlXCIpO1xyXG4gICAgICAgIGNvbnN0IHN1bW1hcnlQbGFuUHJpY2UgPSBmdW5jLnNlbGVjdChcIi5zdW1tYXJ5LXBsYW4tcHJpY2VcIik7XHJcbiAgICAgICAgY29uc3Qgc3VtbWFyeVBsYW5DaGFuZ2VMaW5rID0gZnVuYy5zZWxlY3QoXCIuc3VtbWFyeS1wbGFuLWNoYW5nZS1saW5rXCIpO1xyXG5cclxuICAgICAgICAvLyBQbGFuIFN1bW1hcnlcclxuICAgICAgICBwbGFuSW5wdXRzLmZvckVhY2goKHBsYW5JbnB1dCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAocGxhbklucHV0LmNoZWNrZWQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkUGxhbiA9IHBsYW5JbnB1dC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2VsZWN0ZWRQbGFuVGl0bGUgPVxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkUGxhbi5xdWVyeVNlbGVjdG9yKFwiLnBsYW4tdGl0bGVcIik7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2VsZWN0ZWRQbGFuUHJpY2UgPVxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkUGxhbi5xdWVyeVNlbGVjdG9yKFwiLnBsYW4tcHJpY2VcIik7XHJcbiAgICAgICAgICAgICAgICBzdW1tYXJ5UGxhblRpdGxlLnRleHRDb250ZW50ID0gYCR7c2VsZWN0ZWRQbGFuVGl0bGUudGV4dENvbnRlbnR9ICgke2R1cmF0aW9ufSlgO1xyXG4gICAgICAgICAgICAgICAgc3VtbWFyeVBsYW5QcmljZS50ZXh0Q29udGVudCA9IGAke3NlbGVjdGVkUGxhblByaWNlLnRleHRDb250ZW50fWA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBQbGFuIENoYW5nZSBMaW5rXHJcbiAgICAgICAgc3VtbWFyeVBsYW5DaGFuZ2VMaW5rLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGN1cnJlbnRTdGVwID0gMTtcclxuICAgICAgICAgICAgc2hvd1N0ZXAoY3VycmVudFN0ZXApO1xyXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImN1cnJlbnRTdGVwXCIsIEpTT04uc3RyaW5naWZ5KGN1cnJlbnRTdGVwKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRnVuY3Rpb246IFVwZGF0ZSBBZGRvbiBTdW1tYXJ5XHJcbiAgICBmdW5jdGlvbiB1cGRhdGVBZGRvblN1bW1hcnkoKSB7XHJcbiAgICAgICAgYWRkb25JbnB1dHMuZm9yRWFjaCgoYWRkb25JbnB1dCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBhZGRvbkxhYmVsID0gYWRkb25JbnB1dC5wYXJlbnRFbGVtZW50O1xyXG4gICAgICAgICAgICBjb25zdCBhZGRvblRpdGxlID0gYWRkb25MYWJlbC5xdWVyeVNlbGVjdG9yKFwiLmFkZG9uLXRpdGxlXCIpO1xyXG4gICAgICAgICAgICBjb25zdCBhZGRvblByaWNlID0gYWRkb25MYWJlbC5xdWVyeVNlbGVjdG9yKFwiLmFkZG9uLXByaWNlXCIpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgbGkgPSBmdW5jLmNyZWF0ZShcImxpXCIpO1xyXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50SXRlbUlkID0gYCR7YWRkb25JbnB1dC5pZH1zdW1tYXJ5YDtcclxuICAgICAgICAgICAgbGkuaWQgPSBjdXJyZW50SXRlbUlkO1xyXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50SXRlbSA9IGZ1bmMuc2VsZWN0KGAjJHtjdXJyZW50SXRlbUlkfWApO1xyXG5cclxuICAgICAgICAgICAgbGkuY2xhc3NMaXN0LmFkZChcImZsZXhcIiwgXCJpdGVtLWNlbnRlclwiLCBcImp1c3RpZnktYmV0d2VlblwiKTtcclxuICAgICAgICAgICAgbGkuaW5uZXJIVE1MID0gYFxyXG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ0ZXh0LXNtIHRleHQtZ3JheS03MDBcIj4ke2FkZG9uVGl0bGUudGV4dENvbnRlbnR9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ0ZXh0LXNtXCI+JHthZGRvblByaWNlLnRleHRDb250ZW50fTwvc3Bhbj5cclxuICAgICAgICAgICAgYDtcclxuXHJcbiAgICAgICAgICAgIGlmIChhZGRvbklucHV0LmNoZWNrZWQgJiYgIWN1cnJlbnRJdGVtKSB7XHJcbiAgICAgICAgICAgICAgICBzdW1tYXJ5QWRkb25MaXN0LmFwcGVuZChsaSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWFkZG9uSW5wdXQuY2hlY2tlZCAmJiBjdXJyZW50SXRlbSkge1xyXG4gICAgICAgICAgICAgICAgY3VycmVudEl0ZW0ucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBGdW50aW9uOiBDYWxjdWxhdGUgUGxhbiBDb3N0XHJcbiAgICBmdW5jdGlvbiBjYWxjdWxhdGVQbGFuQ29zdCgpIHtcclxuICAgICAgICBsZXQgcGxhbkNvc3QgPSAwO1xyXG4gICAgICAgIHBsYW5JbnB1dHMuZm9yRWFjaCgocGxhbklucHV0KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChwbGFuSW5wdXQuY2hlY2tlZCAmJiBwbGFuSW5wdXQuaWQgPT09IFwiYXJjaGFkZVwiKSB7XHJcbiAgICAgICAgICAgICAgICBwbGFuQ29zdCA9IGR1cmF0aW9uID09PSBcInllYXJseVwiID8gOTAgOiA5O1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHBsYW5JbnB1dC5jaGVja2VkICYmIHBsYW5JbnB1dC5pZCA9PT0gXCJhZHZhbmNlXCIpIHtcclxuICAgICAgICAgICAgICAgIHBsYW5Db3N0ID0gZHVyYXRpb24gPT09IFwieWVhcmx5XCIgPyAxMjAgOiAxMjtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChwbGFuSW5wdXQuY2hlY2tlZCAmJiBwbGFuSW5wdXQuaWQgPT09IFwicHJvXCIpIHtcclxuICAgICAgICAgICAgICAgIHBsYW5Db3N0ID0gZHVyYXRpb24gPT09IFwieWVhcmx5XCIgPyAxNTAgOiAxNTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBwbGFuQ29zdDtcclxuICAgIH1cclxuICAgIGxldCBwbGFuQ29zdCA9IGNhbGN1bGF0ZVBsYW5Db3N0KCk7XHJcbiAgICAvLyBGdW5jdGlvbjogQ2FsY3VsYXRlIEFkZG9uIENvc3RcclxuICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZUFkZG9uQ29zdCgpIHtcclxuICAgICAgICBsZXQgYWRkb25zQ29zdCA9IDA7XHJcbiAgICAgICAgYWRkb25JbnB1dHMuZm9yRWFjaCgoYWRkb25JbnB1dCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoYWRkb25JbnB1dC5jaGVja2VkICYmIGFkZG9uSW5wdXQuaWQgPT09IFwic2VydmljZVwiKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgYWRkb25Db3N0ID0gZHVyYXRpb24gPT09IFwieWVhcmx5XCIgPyAxMCA6IDE7XHJcbiAgICAgICAgICAgICAgICBhZGRvbnNDb3N0ICs9IGFkZG9uQ29zdDtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChcclxuICAgICAgICAgICAgICAgIGFkZG9uSW5wdXQuY2hlY2tlZCAmJlxyXG4gICAgICAgICAgICAgICAgKGFkZG9uSW5wdXQuaWQgPT09IFwic3RvcmFnZVwiIHx8IGFkZG9uSW5wdXQuaWQgPT09IFwicHJvZmlsZVwiKVxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgIGxldCBhZGRvbkNvc3QgPSBkdXJhdGlvbiA9PT0gXCJ5ZWFybHlcIiA/IDIwIDogMjtcclxuICAgICAgICAgICAgICAgIGFkZG9uc0Nvc3QgKz0gYWRkb25Db3N0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGFkZG9uc0Nvc3Q7XHJcbiAgICB9XHJcbiAgICBsZXQgYWRkb25zQ29zdCA9IGNhbGN1bGF0ZUFkZG9uQ29zdCgpO1xyXG5cclxuICAgIGxldCB0b3RhbENvc3QgPSBwbGFuQ29zdCArIGFkZG9uc0Nvc3Q7XHJcblxyXG4gICAgLy8gRnVuY3Rpb246IFVwZGF0ZSBUb3RhbCBTdW1tYXJ5XHJcbiAgICBmdW5jdGlvbiB1cGRhdGVUb3RhbFN1bW1hcnkoKSB7XHJcbiAgICAgICAgY29uc3QgdG90YWxUaXRsZSA9IGZ1bmMuc2VsZWN0KFwiLnRvdGFsLXRpdGxlXCIpO1xyXG4gICAgICAgIHRvdGFsVGl0bGUuY2xhc3NMaXN0LmFkZChcInRleHQtc21cIik7XHJcbiAgICAgICAgY29uc3QgdG90YWxQcmljZSA9IGZ1bmMuc2VsZWN0KFwiLnRvdGFsLXByaWNlXCIpO1xyXG4gICAgICAgIHRvdGFsUHJpY2UuY2xhc3NMaXN0LmFkZChcclxuICAgICAgICAgICAgXCJ0ZXh0LWxnXCIsXHJcbiAgICAgICAgICAgIFwiZm9udC1ib2xkXCIsXHJcbiAgICAgICAgICAgIFwidGV4dC1baHNsKDI0MyxfMTAwJSxfNjIlKV1cIlxyXG4gICAgICAgICk7XHJcbiAgICAgICAgdG90YWxUaXRsZS50ZXh0Q29udGVudCA9IGBUb3RhbCAocGVyICR7ZHVyYXRpb24uc2xpY2UoMCwgLTIpfSlgO1xyXG4gICAgICAgIHRvdGFsUHJpY2UudGV4dENvbnRlbnQgPSBgJCR7dG90YWxDb3N0fS8ke3Blcn1gO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGZ1bmN0aW9uOiBWYWxpZGF0ZSBGb3JtXHJcbiAgICBmdW5jdGlvbiB2YWxpZGF0ZUZvcm0oKSB7XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICBjdXJyZW50U3RlcCA9PT0gMCAmJlxyXG4gICAgICAgICAgICAobmFtZUlucHV0LnZhbHVlID09PSBcIlwiIHx8XHJcbiAgICAgICAgICAgICAgICBlbWFpbElucHV0LnZhbHVlID09PSBcIlwiIHx8XHJcbiAgICAgICAgICAgICAgICBwaG9uZUlucHV0LnZhbHVlID09PSBcIlwiKVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICBjb25zdCBpbnZhbGlkTWVzc2FnZSA9IGZ1bmMuY3JlYXRlKFwicFwiKTtcclxuICAgICAgICAgICAgaW52YWxpZE1lc3NhZ2UuY2xhc3NMaXN0LmFkZChcclxuICAgICAgICAgICAgICAgIFwiYWJzb2x1dGVcIixcclxuICAgICAgICAgICAgICAgIFwidGV4dC1yZWQtNzAwXCIsXHJcbiAgICAgICAgICAgICAgICBcIi10b3AtNVwiLFxyXG4gICAgICAgICAgICAgICAgXCJsZWZ0LTBcIlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBpbnZhbGlkTWVzc2FnZS5pZCA9IFwiaW52YWxpZC1tZXNzYWdlMVwiO1xyXG4gICAgICAgICAgICBjb25zdCBoYXNJbnZhbGlkTWVzc2FnZTEgPSBmdW5jLnNlbGVjdChcIiNpbnZhbGlkLW1lc3NhZ2UxXCIpO1xyXG4gICAgICAgICAgICBpbnZhbGlkTWVzc2FnZS50ZXh0Q29udGVudCA9IFwiQWxsIGZpZWxkcyBhcmUgcmVxdWlyZWRcIjtcclxuICAgICAgICAgICAgY29uc3Qgc2hvd2VkRm9ybVBvcnRpb24gPSBmdW5jLnNlbGVjdChgI3N0ZXAxYCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGlucHV0V3JhcHBlciA9XHJcbiAgICAgICAgICAgICAgICBzaG93ZWRGb3JtUG9ydGlvbi5xdWVyeVNlbGVjdG9yKFwiLmlucHV0LXdyYXBwZXJcIik7XHJcbiAgICAgICAgICAgIGlmICghaGFzSW52YWxpZE1lc3NhZ2UxKSB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dFdyYXBwZXIuYXBwZW5kKGludmFsaWRNZXNzYWdlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGludmFsaWRNZXNzYWdlLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICB9LCA1MDAwKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIGN1cnJlbnRTdGVwID09PSAxICYmXHJcbiAgICAgICAgICAgICFwbGFuSW5wdXRzWzBdLmNoZWNrZWQgJiZcclxuICAgICAgICAgICAgIXBsYW5JbnB1dHNbMV0uY2hlY2tlZCAmJlxyXG4gICAgICAgICAgICAhcGxhbklucHV0c1syXS5jaGVja2VkXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGludmFsaWRNZXNzYWdlID0gZnVuYy5jcmVhdGUoXCJwXCIpO1xyXG4gICAgICAgICAgICBpbnZhbGlkTWVzc2FnZS5jbGFzc0xpc3QuYWRkKFxyXG4gICAgICAgICAgICAgICAgXCJhYnNvbHV0ZVwiLFxyXG4gICAgICAgICAgICAgICAgXCJ0ZXh0LXJlZC03MDBcIixcclxuICAgICAgICAgICAgICAgIFwiLXRvcC01XCIsXHJcbiAgICAgICAgICAgICAgICBcImxlZnQtMFwiXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGludmFsaWRNZXNzYWdlLmlkID0gXCJpbnZhbGlkLW1lc3NhZ2UyXCI7XHJcbiAgICAgICAgICAgIGNvbnN0IGhhc0ludmFsaWRNZXNzYWdlMiA9IGZ1bmMuc2VsZWN0KFwiI2ludmFsaWQtbWVzc2FnZTJcIik7XHJcbiAgICAgICAgICAgIGludmFsaWRNZXNzYWdlLnRleHRDb250ZW50ID0gXCJZb3UgZGlkbid0IGNob29zZSBhbnkgcGxhblwiO1xyXG4gICAgICAgICAgICBjb25zdCBzaG93ZWRGb3JtUG9ydGlvbiA9IGZ1bmMuc2VsZWN0KGAjc3RlcDJgKTtcclxuICAgICAgICAgICAgY29uc3QgaW5wdXRXcmFwcGVyMiA9XHJcbiAgICAgICAgICAgICAgICBzaG93ZWRGb3JtUG9ydGlvbi5xdWVyeVNlbGVjdG9yKFwiLmlucHV0LXdyYXBwZXJcIik7XHJcbiAgICAgICAgICAgIGlmICghaGFzSW52YWxpZE1lc3NhZ2UyKSB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dFdyYXBwZXIyLmFwcGVuZChpbnZhbGlkTWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpbnZhbGlkTWVzc2FnZS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgfSwgNTAwMCk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRnVuY3Rpb246IFNldCBMb2NhbCBTdG9yYWdlXHJcbiAgICBmdW5jdGlvbiBzZXRMb2NhbFN0b3JhZ2UoKSB7XHJcbiAgICAgICAgaWYgKGN1cnJlbnRTdGVwID09PSAxKSB7XHJcbiAgICAgICAgICAgIHBsYW5JbnB1dHMuZm9yRWFjaCgocGxhbklucHV0LCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXHJcbiAgICAgICAgICAgICAgICAgICAgYHBsYW5JbnB1dCR7aW5kZXh9YCxcclxuICAgICAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeShwbGFuSW5wdXQuY2hlY2tlZCA9PT0gdHJ1ZSA/IHRydWUgOiBmYWxzZSlcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY3VycmVudFN0ZXAgPT09IDIpIHtcclxuICAgICAgICAgICAgYWRkb25JbnB1dHMuZm9yRWFjaCgoYWRkb25JbnB1dCwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFxyXG4gICAgICAgICAgICAgICAgICAgIGBhZGRvbklucHV0JHtpbmRleH1gLFxyXG4gICAgICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KGFkZG9uSW5wdXQuY2hlY2tlZCA9PT0gdHJ1ZSA/IHRydWUgOiBmYWxzZSlcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBGdW5jdGlvbjogR2V0IExvY2FsIFN0b3JhZ2VcclxuICAgIGZ1bmN0aW9uIGdldExvY2FsU3RvcmFnZSgpIHtcclxuICAgICAgICBwbGFuSW5wdXRzLmZvckVhY2goKHBsYW5JbnB1dCwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgcGxhbklucHV0LmNoZWNrZWQgPSBKU09OLnBhcnNlKFxyXG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLmdldEl0ZW0oYHBsYW5JbnB1dCR7aW5kZXh9YClcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBhZGRvbklucHV0cy5mb3JFYWNoKChhZGRvbklucHV0LCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICBhZGRvbklucHV0LmNoZWNrZWQgPSBKU09OLnBhcnNlKFxyXG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLmdldEl0ZW0oYGFkZG9uSW5wdXQke2luZGV4fWApXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRnVuY3Rpb246IGluaXRpYWxpemF0aW9uXHJcbiAgICBmdW5jdGlvbiBpbml0aWFsaXplRm9ybSgpIHtcclxuICAgICAgICBzaG93U3RlcChjdXJyZW50U3RlcCk7XHJcbiAgICAgICAgdXBkYXRlTmF2QnRucygpO1xyXG4gICAgICAgIHVwZGF0ZVBsYW5TdGVwKCk7IC8vIGNhdXNlIHByb2JsZW0gc29tZSB0aW1lXHJcbiAgICAgICAgdXBkYXRlUGxhblN1bW1hcnkoKTtcclxuICAgICAgICB1cGRhdGVBZGRvblN1bW1hcnkoKTtcclxuXHJcbiAgICAgICAgcHJldkJ0bnMuZm9yRWFjaCgocHJldkJ0bikgPT4ge1xyXG4gICAgICAgICAgICBwcmV2QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBnb1RvUHJldmlvdXNTdGVwKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbmV4dEJ0bnMuZm9yRWFjaCgobmV4dEJ0bikgPT4ge1xyXG4gICAgICAgICAgICBuZXh0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsaWRhdGVGb3JtKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZXRMb2NhbFN0b3JhZ2UoKTtcclxuICAgICAgICAgICAgICAgICAgICBnb1RvTmV4dFN0ZXAoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG5hbWVJbnB1dC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIm5hbWVJbnB1dFwiLCBKU09OLnN0cmluZ2lmeShuYW1lSW5wdXQudmFsdWUpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBlbWFpbElucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFxyXG4gICAgICAgICAgICAgICAgXCJlbWFpbElucHV0XCIsXHJcbiAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeShlbWFpbElucHV0LnZhbHVlKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHBob25lSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsICgpID0+IHtcclxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXHJcbiAgICAgICAgICAgICAgICBcInBob25lSW5wdXRcIixcclxuICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHBob25lSW5wdXQudmFsdWUpXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHBsYW5JbnB1dHMuZm9yRWFjaCgocGxhbklucHV0KSA9PiB7XHJcbiAgICAgICAgICAgIHBsYW5JbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlUGxhblN1bW1hcnkoKTtcclxuICAgICAgICAgICAgICAgIHBsYW5Db3N0ID0gY2FsY3VsYXRlUGxhbkNvc3QoKTtcclxuICAgICAgICAgICAgICAgIHRvdGFsQ29zdCA9IHBsYW5Db3N0ICsgYWRkb25zQ29zdDtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZVRvdGFsU3VtbWFyeSgpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcGFyZW50TGFiZWwgPSBwbGFuSW5wdXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50O1xyXG5cclxuICAgICAgICAgICAgICAgIHBsYW5MYWJlbHMuZm9yRWFjaCgocGxhbkxhYmVsKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGxhbkxhYmVsLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocGxhbklucHV0LmNoZWNrZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnRMYWJlbC5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgYWRkb25JbnB1dHMuZm9yRWFjaCgoYWRkb25JbnB1dCkgPT4ge1xyXG4gICAgICAgICAgICBhZGRvbklucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVQbGFuU3VtbWFyeSgpO1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlQWRkb25TdW1tYXJ5KCk7XHJcbiAgICAgICAgICAgICAgICBhZGRvbnNDb3N0ID0gY2FsY3VsYXRlQWRkb25Db3N0KCk7XHJcbiAgICAgICAgICAgICAgICB0b3RhbENvc3QgPSBwbGFuQ29zdCArIGFkZG9uc0Nvc3Q7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVUb3RhbFN1bW1hcnkoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG5leHRCdG5zLmZvckVhY2goKG5leHRCdG4pID0+IHtcclxuICAgICAgICAgICAgbmV4dEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGVwID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlUGxhblN0ZXAoKTtcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVQbGFuU3VtbWFyeSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZUFkZG9uU3VtbWFyeSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdG9nZ2xlSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBkdXJhdGlvbiA9IHRvZ2dsZS5jaGVja2VkID8gXCJ5ZWFybHlcIiA6IFwibW9udGhseVwiO1xyXG4gICAgICAgICAgICBwZXIgPSBkdXJhdGlvbiA9PT0gXCJ5ZWFybHlcIiA/IFwieXJcIiA6IFwibW9cIjtcclxuICAgICAgICAgICAgdXBkYXRlUGxhblN0ZXAoKTtcclxuICAgICAgICAgICAgdXBkYXRlQWRkb25TdGVwKCk7XHJcbiAgICAgICAgICAgIHVwZGF0ZVBsYW5TdW1tYXJ5KCk7XHJcbiAgICAgICAgICAgIHdoaWxlIChzdW1tYXJ5QWRkb25MaXN0LmZpcnN0RWxlbWVudENoaWxkKSB7XHJcbiAgICAgICAgICAgICAgICBzdW1tYXJ5QWRkb25MaXN0LnJlbW92ZUNoaWxkKFxyXG4gICAgICAgICAgICAgICAgICAgIHN1bW1hcnlBZGRvbkxpc3QuZmlyc3RFbGVtZW50Q2hpbGRcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdXBkYXRlQWRkb25TdW1tYXJ5KCk7XHJcbiAgICAgICAgICAgIHBsYW5Db3N0ID0gY2FsY3VsYXRlUGxhbkNvc3QoKTtcclxuICAgICAgICAgICAgYWRkb25zQ29zdCA9IGNhbGN1bGF0ZUFkZG9uQ29zdCgpO1xyXG4gICAgICAgICAgICB0b3RhbENvc3QgPSBwbGFuQ29zdCArIGFkZG9uc0Nvc3Q7XHJcbiAgICAgICAgICAgIHVwZGF0ZVRvdGFsU3VtbWFyeSgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAoY3VycmVudFN0ZXAgPT09IHN0ZXBzLmxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLmNsZWFyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGluaXRpYWxpemVGb3JtKCk7XHJcbn0pO1xyXG4vLyBzdGVwc1tjdXJyZW50U3RlcF0uc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xyXG5cclxuLy8gbmV4dEJ0bnMuZm9yRWFjaCgobmV4dEJ0bikgPT4ge1xyXG4vLyAgICAgbmV4dEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuLy8gICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbi8vICAgICAgICAgaWYgKGN1cnJlbnRTdGVwIDwgc3RlcHMubGVuZ3RoIC0gMSkge1xyXG4vLyAgICAgICAgICAgICBzdGVwc1tjdXJyZW50U3RlcF0uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4vLyAgICAgICAgICAgICBjdXJyZW50U3RlcCsrO1xyXG4vLyAgICAgICAgICAgICBzdGVwc1tjdXJyZW50U3RlcF0uc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xyXG4vLyAgICAgICAgIH1cclxuLy8gICAgIH0pO1xyXG4vLyB9KTtcclxuXHJcbi8vIHByZXZCdG5zLmZvckVhY2goKHByZXZCdG4pID0+IHtcclxuLy8gICAgIHByZXZCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcbi8vICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4vLyAgICAgICAgIGlmIChjdXJyZW50U3RlcCA+IDApIHtcclxuLy8gICAgICAgICAgICAgc3RlcHNbY3VycmVudFN0ZXBdLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuLy8gICAgICAgICAgICAgY3VycmVudFN0ZXAtLTtcclxuLy8gICAgICAgICAgICAgc3RlcHNbY3VycmVudFN0ZXBdLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcclxuLy8gICAgICAgICB9XHJcbi8vICAgICB9KTtcclxuLy8gfSk7XHJcblxyXG4vLyBuYXZCdG5zLmZvckVhY2goKG5hdkJ0biwgaW5kZXgpID0+IHtcclxuLy8gICAgIGlmIChpbmRleCA9PSBjdXJyZW50U3RlcCkge1xyXG4vLyAgICAgICAgIG5hdkJ0bi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcImhzbCgyMjgsIDEwMCUsIDg0JSlcIjtcclxuLy8gICAgIH0gZWxzZSB7XHJcbi8vICAgICAgICAgbmF2QnRuLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwidHJhbnNwYXJlbnRcIjtcclxuLy8gICAgIH1cclxuLy8gfSk7XHJcblxyXG4vLyBzdGVwTGlua3MuZm9yRWFjaCgoc3RlcExpbmssIGluZGV4KSA9PiB7XHJcbi8vICAgICBzdGVwTGluay5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuLy8gICAgICAgICBlLnByZXZlbnREZWZhdWx0O1xyXG4vLyAgICAgICAgIHN0ZXBzW2N1cnJlbnRTdGVwXS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbi8vICAgICAgICAgY3VycmVudFN0ZXAgPSBzdGVwTGluay5kYXRhc2V0LnN0ZXA7XHJcbi8vICAgICAgICAgc3RlcHNbY3VycmVudFN0ZXBdLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcclxuLy8gICAgIH0pO1xyXG4vLyB9KTtcclxuXHJcbi8vIHN0ZXAgMlxyXG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuLy8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbl9fd2VicGFja19yZXF1aXJlX18ubSA9IF9fd2VicGFja19tb2R1bGVzX187XG5cbiIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iaiwgcHJvcCkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7IH0iLCIvLyBubyBiYXNlVVJJXG5cbi8vIG9iamVjdCB0byBzdG9yZSBsb2FkZWQgYW5kIGxvYWRpbmcgY2h1bmtzXG4vLyB1bmRlZmluZWQgPSBjaHVuayBub3QgbG9hZGVkLCBudWxsID0gY2h1bmsgcHJlbG9hZGVkL3ByZWZldGNoZWRcbi8vIFtyZXNvbHZlLCByZWplY3QsIFByb21pc2VdID0gY2h1bmsgbG9hZGluZywgMCA9IGNodW5rIGxvYWRlZFxudmFyIGluc3RhbGxlZENodW5rcyA9IHtcblx0NDc6IDAsXG5cdDc0MjogMFxufTtcblxuLy8gbm8gY2h1bmsgb24gZGVtYW5kIGxvYWRpbmdcblxuLy8gbm8gcHJlZmV0Y2hpbmdcblxuLy8gbm8gcHJlbG9hZGVkXG5cbi8vIG5vIEhNUlxuXG4vLyBubyBITVIgbWFuaWZlc3RcblxuX193ZWJwYWNrX3JlcXVpcmVfXy5PLmogPSBmdW5jdGlvbihjaHVua0lkKSB7IHJldHVybiBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPT09IDA7IH07XG5cbi8vIGluc3RhbGwgYSBKU09OUCBjYWxsYmFjayBmb3IgY2h1bmsgbG9hZGluZ1xudmFyIHdlYnBhY2tKc29ucENhbGxiYWNrID0gZnVuY3Rpb24ocGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24sIGRhdGEpIHtcblx0dmFyIGNodW5rSWRzID0gZGF0YVswXTtcblx0dmFyIG1vcmVNb2R1bGVzID0gZGF0YVsxXTtcblx0dmFyIHJ1bnRpbWUgPSBkYXRhWzJdO1xuXHQvLyBhZGQgXCJtb3JlTW9kdWxlc1wiIHRvIHRoZSBtb2R1bGVzIG9iamVjdCxcblx0Ly8gdGhlbiBmbGFnIGFsbCBcImNodW5rSWRzXCIgYXMgbG9hZGVkIGFuZCBmaXJlIGNhbGxiYWNrXG5cdHZhciBtb2R1bGVJZCwgY2h1bmtJZCwgaSA9IDA7XG5cdGlmKGNodW5rSWRzLnNvbWUoZnVuY3Rpb24oaWQpIHsgcmV0dXJuIGluc3RhbGxlZENodW5rc1tpZF0gIT09IDA7IH0pKSB7XG5cdFx0Zm9yKG1vZHVsZUlkIGluIG1vcmVNb2R1bGVzKSB7XG5cdFx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8obW9yZU1vZHVsZXMsIG1vZHVsZUlkKSkge1xuXHRcdFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLm1bbW9kdWxlSWRdID0gbW9yZU1vZHVsZXNbbW9kdWxlSWRdO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZihydW50aW1lKSB2YXIgcmVzdWx0ID0gcnVudGltZShfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblx0fVxuXHRpZihwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbikgcGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24oZGF0YSk7XG5cdGZvcig7aSA8IGNodW5rSWRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0Y2h1bmtJZCA9IGNodW5rSWRzW2ldO1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhpbnN0YWxsZWRDaHVua3MsIGNodW5rSWQpICYmIGluc3RhbGxlZENodW5rc1tjaHVua0lkXSkge1xuXHRcdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdWzBdKCk7XG5cdFx0fVxuXHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IDA7XG5cdH1cblx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18uTyhyZXN1bHQpO1xufVxuXG52YXIgY2h1bmtMb2FkaW5nR2xvYmFsID0gc2VsZltcIndlYnBhY2tDaHVua3NhbXBsZV9wcm9qZWN0c1wiXSA9IHNlbGZbXCJ3ZWJwYWNrQ2h1bmtzYW1wbGVfcHJvamVjdHNcIl0gfHwgW107XG5jaHVua0xvYWRpbmdHbG9iYWwuZm9yRWFjaCh3ZWJwYWNrSnNvbnBDYWxsYmFjay5iaW5kKG51bGwsIDApKTtcbmNodW5rTG9hZGluZ0dsb2JhbC5wdXNoID0gd2VicGFja0pzb25wQ2FsbGJhY2suYmluZChudWxsLCBjaHVua0xvYWRpbmdHbG9iYWwucHVzaC5iaW5kKGNodW5rTG9hZGluZ0dsb2JhbCkpOyIsIi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLy8gVGhpcyBlbnRyeSBtb2R1bGUgZGVwZW5kcyBvbiBvdGhlciBsb2FkZWQgY2h1bmtzIGFuZCBleGVjdXRpb24gbmVlZCB0byBiZSBkZWxheWVkXG52YXIgX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18uTyh1bmRlZmluZWQsIFs3NDJdLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMzQ0KTsgfSlcbl9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fLk8oX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4iXSwibmFtZXMiOlsiZGVmZXJyZWQiLCJzZWxlY3QiLCJlbGVtZW50IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwic2VsZWN0QWxsIiwiZWxlbWVudHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY3JlYXRlIiwidGV4dCIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsImNyZWF0ZWRFbGVtZW50IiwiY3JlYXRlRWxlbWVudCIsInRleHRDb250ZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsInN0ZXBzIiwiZnVuYyIsIm5leHRCdG5zIiwicHJldkJ0bnMiLCJuYXZCdG5zIiwidG9nZ2xlSW5wdXQiLCJuYW1lSW5wdXQiLCJ2YWx1ZSIsIkpTT04iLCJwYXJzZSIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJlbWFpbElucHV0IiwicGhvbmVJbnB1dCIsInBsYW5JbnB1dHMiLCJfdG9Db25zdW1hYmxlQXJyYXkiLCJwbGFuTGFiZWxzIiwibW9udGhseURlc2NyaXB0aW9uIiwieWVhcmx5RGVzY3JpcHRpb24iLCJkaXNjb3VudHMiLCJwZXIiLCJhZGRvbklucHV0cyIsInN1bW1hcnlBZGRvbkxpc3QiLCJkdXJhdGlvbiIsImN1cnJlbnRTdGVwIiwic2hvd1N0ZXAiLCJzdGVwSW5kZXgiLCJmb3JFYWNoIiwic3RlcCIsImluZGV4IiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwidXBkYXRlTmF2QnRucyIsIm5hdkJ0biIsInN0eWxlIiwiYmFja2dyb3VuZENvbG9yIiwiZ29Ub1ByZXZpb3VzU3RlcCIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJ1cGRhdGVQbGFuU3RlcCIsInBsYW5JbnB1dCIsImlkIiwibmV4dEVsZW1lbnRTaWJsaW5nIiwiY29uY2F0IiwiY2hlY2tlZCIsInBhcmVudEVsZW1lbnQiLCJkaXNjb3VudCIsInVwZGF0ZVBsYW5TdW1tYXJ5Iiwic3VtbWFyeVBsYW5UaXRsZSIsInN1bW1hcnlQbGFuUHJpY2UiLCJzdW1tYXJ5UGxhbkNoYW5nZUxpbmsiLCJzZWxlY3RlZFBsYW4iLCJzZWxlY3RlZFBsYW5UaXRsZSIsInNlbGVjdGVkUGxhblByaWNlIiwidXBkYXRlQWRkb25TdW1tYXJ5IiwiYWRkb25JbnB1dCIsImFkZG9uTGFiZWwiLCJhZGRvblRpdGxlIiwiYWRkb25QcmljZSIsImxpIiwiY3VycmVudEl0ZW1JZCIsImN1cnJlbnRJdGVtIiwiaW5uZXJIVE1MIiwiYXBwZW5kIiwiY2FsY3VsYXRlUGxhbkNvc3QiLCJwbGFuQ29zdCIsImNhbGN1bGF0ZUFkZG9uQ29zdCIsImFkZG9uc0Nvc3QiLCJ0b3RhbENvc3QiLCJ1cGRhdGVUb3RhbFN1bW1hcnkiLCJ0b3RhbFRpdGxlIiwidG90YWxQcmljZSIsInNsaWNlIiwicHJldkJ0biIsIm5leHRCdG4iLCJpbnZhbGlkTWVzc2FnZSIsImhhc0ludmFsaWRNZXNzYWdlMSIsImlucHV0V3JhcHBlciIsInNldFRpbWVvdXQiLCJoYXNJbnZhbGlkTWVzc2FnZTIiLCJpbnB1dFdyYXBwZXIyIiwidmFsaWRhdGVGb3JtIiwicGFyZW50TGFiZWwiLCJwbGFuTGFiZWwiLCJlIiwidG9nZ2xlIiwibGFzdEVsZW1lbnRDaGlsZCIsImZpcnN0RWxlbWVudENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJjbGVhciIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwibSIsIk8iLCJyZXN1bHQiLCJjaHVua0lkcyIsImZuIiwicHJpb3JpdHkiLCJub3RGdWxmaWxsZWQiLCJJbmZpbml0eSIsImkiLCJmdWxmaWxsZWQiLCJqIiwiT2JqZWN0Iiwia2V5cyIsImV2ZXJ5Iiwia2V5Iiwic3BsaWNlIiwiciIsIm8iLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiaW5zdGFsbGVkQ2h1bmtzIiwiY2h1bmtJZCIsIndlYnBhY2tKc29ucENhbGxiYWNrIiwicGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24iLCJkYXRhIiwibW9yZU1vZHVsZXMiLCJydW50aW1lIiwic29tZSIsImNodW5rTG9hZGluZ0dsb2JhbCIsInNlbGYiLCJiaW5kIiwicHVzaCIsIl9fd2VicGFja19leHBvcnRzX18iXSwic291cmNlUm9vdCI6IiJ9