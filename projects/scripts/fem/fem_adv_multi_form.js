!function(){"use strict";var e,t={344:function(){function e(e){return document.querySelector(e)}function t(e){return document.querySelectorAll(e)}function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=document.createElement(e);return t&&(n.textContent=t),n}function a(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}document.addEventListener("DOMContentLoaded",(function(){var r=t(".step"),c=t(".next"),o=t(".prev"),i=(t("[data-step]"),t(".nav-btn")),l=e("#toggle");l.checked=JSON.parse(localStorage.getItem("toggleInput"));var u=e("[name='name']");u.value=JSON.parse(localStorage.getItem("nameInput"));var s=e("[name='email']");s.value=JSON.parse(localStorage.getItem("emailInput"));var d=e("[name='phone']");d.value=JSON.parse(localStorage.getItem("phoneInput"));var f=a(t("input[name='plan']")),p=a(t(".plan-label")),v=(a(t(".plan-price")),e(".monthly-description")),m=e(".yearly-description"),h=a(t(".discount")),y=JSON.parse(localStorage.getItem("per"))||"mo",g=t("input[name='add-on']"),S=(a(t("[name='add-on']:checked")),e(".summary-addon-list")),E=JSON.parse(localStorage.getItem("duration"))||"monthly",k=JSON.parse(localStorage.getItem("currentStep"))||0;function x(e){r.forEach((function(t,n){n===e?t.classList.add("active"):t.classList.remove("active")}))}function I(){i.forEach((function(e,t){t===k?e.classList.add("active"):e.classList.remove("active"),k===r.length-1&&(i[i.length-1].style.backgroundColor="hsl(228, 100%, 84%)")}))}function O(){k>0&&(x(--k),I(),localStorage.setItem("currentStep",JSON.stringify(k)))}function L(){f.forEach((function(e){"archade"===e.id?(e.value="yearly"===E?90:9,e.nextElementSibling.textContent="$".concat(e.value,"/").concat(y)):"advance"===e.id?(e.value="yearly"===E?120:12,e.nextElementSibling.textContent="$".concat(e.value,"/").concat(y)):"pro"===e.id&&(e.value="yearly"===E?150:15,e.nextElementSibling.textContent="$".concat(e.value,"/").concat(y)),e.addEventListener("click",(function(){e.checked?e.parentElement.classList.add("selected-plan"):e.parentElement.classList.remove("selected-plan")}))})),"yearly"===E?(v.classList.remove("active"),m.classList.add("active"),h.forEach((function(e){e.textContent="2 months free"}))):(m.classList.remove("active"),v.classList.add("active"),h.forEach((function(e){e.textContent=""})))}function b(){g.forEach((function(e){"service"===e.id?(e.value="yearly"===E?10:1,e.parentElement.lastElementChild.textContent="$".concat(e.value,"/").concat(y)):("storage"===e.id||"profile"===e.id)&&(e.value="yearly"===E?20:2,e.parentElement.lastElementChild.textContent="$".concat(e.value,"/").concat(y))}))}function C(){var t=e(".summary-plan-title"),n=e(".summary-plan-price"),a=e(".summary-plan-change-link");f.forEach((function(e){if(e.checked){var a=e.parentElement.parentElement,r=a.querySelector(".plan-title"),c=a.querySelector(".plan-price");t.textContent="".concat(r.textContent," (").concat(E,")"),n.textContent="".concat(c.textContent)}})),a.addEventListener("click",(function(){x(k=1),localStorage.setItem("currentStep",JSON.stringify(k))}))}function J(){g.forEach((function(t){var a=t.parentElement,r=a.querySelector(".addon-title"),c=a.querySelector(".addon-price"),o=n("li"),i="".concat(t.id,"summary");o.id=i;var l=e("#".concat(i));o.classList.add("flex","item-center","justify-between"),o.innerHTML='\n                <span class="text-sm text-gray-700">'.concat(r.textContent,'</span>\n                <span class="text-sm">').concat(c.textContent,"</span>\n            "),t.checked&&!l?S.append(o):!t.checked&&l&&l.remove()}))}function N(){var e=0;return f.forEach((function(t){t.checked&&"archade"===t.id?e="yearly"===E?90:9:t.checked&&"advance"===t.id?e="yearly"===E?120:12:t.checked&&"pro"===t.id&&(e="yearly"===E?150:15)})),e}f.forEach((function(e,t){e.checked=JSON.parse(localStorage.getItem("planInput".concat(t)))})),g.forEach((function(e,t){e.checked=JSON.parse(localStorage.getItem("addonInput".concat(t)))}));var q=N();function w(){var e=0;return g.forEach((function(t){t.checked&&"service"===t.id?e+="yearly"===E?10:1:!t.checked||"storage"!==t.id&&"profile"!==t.id||(e+="yearly"===E?20:2)})),e}var A=w(),j=q+A;function $(){var t=e(".total-title");t.classList.add("text-sm");var n=e(".total-price");n.classList.add("text-lg","font-bold","text-[hsl(243,_100%,_62%)]"),t.textContent="Total (per ".concat(E.slice(0,-2),")"),n.textContent="$".concat(j,"/").concat(y)}x(k),I(),L(),b(),C(),J(),o.forEach((function(e){e.addEventListener("click",O)})),c.forEach((function(t){t.addEventListener("click",(function(){(function(){if(0===k&&(""===u.value||""===s.value||""===d.value)){var t=n("p");t.classList.add("absolute","text-red-700","-top-5","left-0"),t.id="invalid-message1";var a=e("#invalid-message1");t.textContent="All fields are required";var r=e("#step1").querySelector(".input-wrapper");return a||r.append(t),setTimeout((function(){t.remove()}),5e3),!1}if(1===k&&!f[0].checked&&!f[1].checked&&!f[2].checked){var c=n("p");c.classList.add("absolute","text-red-700","-top-5","left-0"),c.id="invalid-message2";var o=e("#invalid-message2");c.textContent="You didn't choose any plan";var i=e("#step2").querySelector(".input-wrapper");return o||i.append(c),setTimeout((function(){c.remove()}),5e3),!1}return!0})()&&(1===k&&f.forEach((function(e,t){localStorage.setItem("planInput".concat(t),JSON.stringify(!0===e.checked))})),2===k&&g.forEach((function(e,t){localStorage.setItem("addonInput".concat(t),JSON.stringify(!0===e.checked))})),k<r.length-1&&(x(++k),I(),localStorage.setItem("currentStep",JSON.stringify(k))))}))})),u.addEventListener("keyup",(function(){localStorage.setItem("nameInput",JSON.stringify(u.value))})),s.addEventListener("keyup",(function(){localStorage.setItem("emailInput",JSON.stringify(s.value))})),d.addEventListener("keyup",(function(){localStorage.setItem("phoneInput",JSON.stringify(d.value))})),f.forEach((function(e){e.addEventListener("click",(function(){C(),q=N(),j=q+A,$();var t=e.parentElement.parentElement;p.forEach((function(e){e.classList.remove("active")})),e.checked&&t.classList.add("active")}))})),g.forEach((function(e){e.addEventListener("click",(function(){C(),J(),A=w(),j=q+A,$()}))})),c.forEach((function(e){e.addEventListener("click",(function(){1===k&&(L(),C(),J())}))})),l.addEventListener("change",(function(e){for(E=toggle.checked?"yearly":"monthly",y="yearly"===E?"yr":"mo",L(),b(),C();S.firstElementChild;)S.removeChild(S.firstElementChild);J(),q=N(),A=w(),j=q+A,$(),localStorage.setItem("duration",JSON.stringify(E)),localStorage.setItem("per",JSON.stringify(y)),localStorage.setItem("toggleInput",JSON.stringify(!!l.checked))})),k===r.length-1&&localStorage.clear()}))}},n={};function a(e){var r=n[e];if(void 0!==r)return r.exports;var c=n[e]={exports:{}};return t[e](c,c.exports,a),c.exports}a.m=t,e=[],a.O=function(t,n,r,c){if(!n){var o=1/0;for(s=0;s<e.length;s++){n=e[s][0],r=e[s][1],c=e[s][2];for(var i=!0,l=0;l<n.length;l++)(!1&c||o>=c)&&Object.keys(a.O).every((function(e){return a.O[e](n[l])}))?n.splice(l--,1):(i=!1,c<o&&(o=c));if(i){e.splice(s--,1);var u=r();void 0!==u&&(t=u)}}return t}c=c||0;for(var s=e.length;s>0&&e[s-1][2]>c;s--)e[s]=e[s-1];e[s]=[n,r,c]},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={47:0,79:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,c,o=n[0],i=n[1],l=n[2],u=0;if(o.some((function(t){return 0!==e[t]}))){for(r in i)a.o(i,r)&&(a.m[r]=i[r]);if(l)var s=l(a)}for(t&&t(n);u<o.length;u++)c=o[u],a.o(e,c)&&e[c]&&e[c][0](),e[c]=0;return a.O(s)},n=self.webpackChunkbittechdeveloper_github_io=self.webpackChunkbittechdeveloper_github_io||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var r=a.O(void 0,[79],(function(){return a(344)}));r=a.O(r)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQUVNLEVBQWlCQyxJQUFZRCxFQUFnQkMsSUFDckVELEVBQWdCQyxHQUFTLEtBRTFCRCxFQUFnQkMsR0FBVyxFQUU1QixPQUFPOUIsRUFBb0JPLEVBQUVDLEVBQzlCLEVBRUk2QixFQUFxQkMsS0FBNkMsdUNBQUlBLEtBQTZDLHdDQUFLLEdBQzVIRCxFQUFtQnRHLFFBQVFnRyxFQUFxQlEsS0FBSyxLQUFNLElBQzNERixFQUFtQkcsS0FBT1QsRUFBcUJRLEtBQUssS0FBTUYsRUFBbUJHLEtBQUtELEtBQUtGLEcsSUNoRHZGLElBQUlJLEVBQXNCekMsRUFBb0JPLE9BQUV6RyxFQUFXLENBQUMsS0FBSyxXQUFhLE9BQU9rRyxFQUFvQixJQUFNLElBQy9HeUMsRUFBc0J6QyxFQUFvQk8sRUFBRWtDLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iaXR0ZWNoZGV2ZWxvcGVyLWdpdGh1Yi1pby93ZWJwYWNrL3J1bnRpbWUvY2h1bmsgbG9hZGVkIiwid2VicGFjazovL2JpdHRlY2hkZXZlbG9wZXItZ2l0aHViLWlvLy4vc3JjL3NjcmlwdHMvbGlianMvZnVuY3Rpb25zLmpzIiwid2VicGFjazovL2JpdHRlY2hkZXZlbG9wZXItZ2l0aHViLWlvLy4vc3JjL3NjcmlwdHMvZmVtL2ZlbS1hZHYtbXVsdGktZm9ybS5qcyIsIndlYnBhY2s6Ly9iaXR0ZWNoZGV2ZWxvcGVyLWdpdGh1Yi1pby93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9iaXR0ZWNoZGV2ZWxvcGVyLWdpdGh1Yi1pby93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL2JpdHRlY2hkZXZlbG9wZXItZ2l0aHViLWlvL3dlYnBhY2svcnVudGltZS9qc29ucCBjaHVuayBsb2FkaW5nIiwid2VicGFjazovL2JpdHRlY2hkZXZlbG9wZXItZ2l0aHViLWlvL3dlYnBhY2svc3RhcnR1cCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZGVmZXJyZWQgPSBbXTtcbl9fd2VicGFja19yZXF1aXJlX18uTyA9IGZ1bmN0aW9uKHJlc3VsdCwgY2h1bmtJZHMsIGZuLCBwcmlvcml0eSkge1xuXHRpZihjaHVua0lkcykge1xuXHRcdHByaW9yaXR5ID0gcHJpb3JpdHkgfHwgMDtcblx0XHRmb3IodmFyIGkgPSBkZWZlcnJlZC5sZW5ndGg7IGkgPiAwICYmIGRlZmVycmVkW2kgLSAxXVsyXSA+IHByaW9yaXR5OyBpLS0pIGRlZmVycmVkW2ldID0gZGVmZXJyZWRbaSAtIDFdO1xuXHRcdGRlZmVycmVkW2ldID0gW2NodW5rSWRzLCBmbiwgcHJpb3JpdHldO1xuXHRcdHJldHVybjtcblx0fVxuXHR2YXIgbm90RnVsZmlsbGVkID0gSW5maW5pdHk7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgZGVmZXJyZWQubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgY2h1bmtJZHMgPSBkZWZlcnJlZFtpXVswXTtcblx0XHR2YXIgZm4gPSBkZWZlcnJlZFtpXVsxXTtcblx0XHR2YXIgcHJpb3JpdHkgPSBkZWZlcnJlZFtpXVsyXTtcblx0XHR2YXIgZnVsZmlsbGVkID0gdHJ1ZTtcblx0XHRmb3IgKHZhciBqID0gMDsgaiA8IGNodW5rSWRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRpZiAoKHByaW9yaXR5ICYgMSA9PT0gMCB8fCBub3RGdWxmaWxsZWQgPj0gcHJpb3JpdHkpICYmIE9iamVjdC5rZXlzKF9fd2VicGFja19yZXF1aXJlX18uTykuZXZlcnkoZnVuY3Rpb24oa2V5KSB7IHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLk9ba2V5XShjaHVua0lkc1tqXSk7IH0pKSB7XG5cdFx0XHRcdGNodW5rSWRzLnNwbGljZShqLS0sIDEpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZnVsZmlsbGVkID0gZmFsc2U7XG5cdFx0XHRcdGlmKHByaW9yaXR5IDwgbm90RnVsZmlsbGVkKSBub3RGdWxmaWxsZWQgPSBwcmlvcml0eTtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYoZnVsZmlsbGVkKSB7XG5cdFx0XHRkZWZlcnJlZC5zcGxpY2UoaS0tLCAxKVxuXHRcdFx0dmFyIHIgPSBmbigpO1xuXHRcdFx0aWYgKHIgIT09IHVuZGVmaW5lZCkgcmVzdWx0ID0gcjtcblx0XHR9XG5cdH1cblx0cmV0dXJuIHJlc3VsdDtcbn07IiwiZXhwb3J0IGZ1bmN0aW9uIHNlbGVjdChlbGVtZW50KSB7XHJcbiAgICBjb25zdCBzZWxlY3RlZEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGVsZW1lbnQpO1xyXG4gICAgcmV0dXJuIHNlbGVjdGVkRWxlbWVudDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNlbGVjdEFsbChlbGVtZW50cykge1xyXG4gICAgY29uc3Qgc2VsZWN0ZWRFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoZWxlbWVudHMpO1xyXG4gICAgcmV0dXJuIHNlbGVjdGVkRWxlbWVudHM7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGUoZWxlbWVudCwgdGV4dCA9IG51bGwpIHtcclxuICAgIGNvbnN0IGNyZWF0ZWRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChlbGVtZW50KTtcclxuICAgIGlmICh0ZXh0KSB7XHJcbiAgICAgICAgY3JlYXRlZEVsZW1lbnQudGV4dENvbnRlbnQgPSB0ZXh0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGNyZWF0ZWRFbGVtZW50O1xyXG59XHJcbiIsIi8vIGltcG9ydCB7IElucHV0IH0gZnJvbSBcInBvc3Rjc3NcIjtcclxuaW1wb3J0IFwiLi4vLi4vc3R5bGVzL21haW4uY3NzXCI7XHJcbmltcG9ydCAqIGFzIGZ1bmMgZnJvbSBcIi4uL2xpYmpzL2Z1bmN0aW9uc1wiO1xyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gVmFyaWFibGVzOiBHZW5lcmFsXHJcbiAgICBjb25zdCBzdGVwcyA9IGZ1bmMuc2VsZWN0QWxsKFwiLnN0ZXBcIik7XHJcbiAgICBjb25zdCBuZXh0QnRucyA9IGZ1bmMuc2VsZWN0QWxsKFwiLm5leHRcIik7XHJcbiAgICBjb25zdCBwcmV2QnRucyA9IGZ1bmMuc2VsZWN0QWxsKFwiLnByZXZcIik7XHJcbiAgICBjb25zdCBzdGVwTGlua3MgPSBmdW5jLnNlbGVjdEFsbChcIltkYXRhLXN0ZXBdXCIpO1xyXG4gICAgY29uc3QgbmF2QnRucyA9IGZ1bmMuc2VsZWN0QWxsKFwiLm5hdi1idG5cIik7XHJcbiAgICBjb25zdCB0b2dnbGVJbnB1dCA9IGZ1bmMuc2VsZWN0KFwiI3RvZ2dsZVwiKTtcclxuICAgIHRvZ2dsZUlucHV0LmNoZWNrZWQgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidG9nZ2xlSW5wdXRcIikpO1xyXG4gICAgLy8gVmFyaWFibGVzOiBpbmZvIFN0ZXAgMVxyXG4gICAgY29uc3QgbmFtZUlucHV0ID0gZnVuYy5zZWxlY3QoXCJbbmFtZT0nbmFtZSddXCIpO1xyXG4gICAgbmFtZUlucHV0LnZhbHVlID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcIm5hbWVJbnB1dFwiKSk7XHJcbiAgICBjb25zdCBlbWFpbElucHV0ID0gZnVuYy5zZWxlY3QoXCJbbmFtZT0nZW1haWwnXVwiKTtcclxuICAgIGVtYWlsSW5wdXQudmFsdWUgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiZW1haWxJbnB1dFwiKSk7XHJcbiAgICBjb25zdCBwaG9uZUlucHV0ID0gZnVuYy5zZWxlY3QoXCJbbmFtZT0ncGhvbmUnXVwiKTtcclxuICAgIHBob25lSW5wdXQudmFsdWUgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwicGhvbmVJbnB1dFwiKSk7XHJcbiAgICAvLyBWYXJpYWJsZXM6IFBsYW4gU3RlcCAyXHJcbiAgICBjb25zdCBwbGFuSW5wdXRzID0gWy4uLmZ1bmMuc2VsZWN0QWxsKFwiaW5wdXRbbmFtZT0ncGxhbiddXCIpXTtcclxuICAgIGNvbnN0IHBsYW5MYWJlbHMgPSBbLi4uZnVuYy5zZWxlY3RBbGwoXCIucGxhbi1sYWJlbFwiKV07XHJcbiAgICBjb25zdCBwbGFuUHJpY2VzID0gWy4uLmZ1bmMuc2VsZWN0QWxsKFwiLnBsYW4tcHJpY2VcIildO1xyXG4gICAgY29uc3QgbW9udGhseURlc2NyaXB0aW9uID0gZnVuYy5zZWxlY3QoXCIubW9udGhseS1kZXNjcmlwdGlvblwiKTtcclxuICAgIGNvbnN0IHllYXJseURlc2NyaXB0aW9uID0gZnVuYy5zZWxlY3QoXCIueWVhcmx5LWRlc2NyaXB0aW9uXCIpO1xyXG4gICAgY29uc3QgZGlzY291bnRzID0gWy4uLmZ1bmMuc2VsZWN0QWxsKFwiLmRpc2NvdW50XCIpXTtcclxuXHJcbiAgICBsZXQgcGVyID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInBlclwiKSkgfHwgXCJtb1wiO1xyXG5cclxuICAgIC8vIFZhcmlhYmxlczogQWRkLW9uIFN0ZXAgM1xyXG4gICAgY29uc3QgYWRkb25JbnB1dHMgPSBmdW5jLnNlbGVjdEFsbChcImlucHV0W25hbWU9J2FkZC1vbiddXCIpO1xyXG4gICAgY29uc3QgY2hlY2tlZEFkZG9ucyA9IFsuLi5mdW5jLnNlbGVjdEFsbChcIltuYW1lPSdhZGQtb24nXTpjaGVja2VkXCIpXTtcclxuXHJcbiAgICAvLyBWYXJpYWJsZXM6IFN1bW1hcnkgU3RlcCA0XHJcbiAgICBjb25zdCBzdW1tYXJ5QWRkb25MaXN0ID0gZnVuYy5zZWxlY3QoXCIuc3VtbWFyeS1hZGRvbi1saXN0XCIpO1xyXG5cclxuICAgIGxldCBkdXJhdGlvbiA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJkdXJhdGlvblwiKSkgfHwgXCJtb250aGx5XCI7XHJcbiAgICBsZXQgY3VycmVudFN0ZXAgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiY3VycmVudFN0ZXBcIikpIHx8IDA7XHJcblxyXG4gICAgZ2V0TG9jYWxTdG9yYWdlKCk7XHJcblxyXG4gICAgLy8gRnVuY3Rpb246IFNob3cgc3RlcFxyXG4gICAgZnVuY3Rpb24gc2hvd1N0ZXAoc3RlcEluZGV4KSB7XHJcbiAgICAgICAgc3RlcHMuZm9yRWFjaCgoc3RlcCwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgaWYgKGluZGV4ID09PSBzdGVwSW5kZXgpIHtcclxuICAgICAgICAgICAgICAgIHN0ZXAuY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHN0ZXAuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEZ1bmN0aW9uOiBVcGRhdGUgTmF2IEJ1dHRvbnNcclxuICAgIGZ1bmN0aW9uIHVwZGF0ZU5hdkJ0bnMoKSB7XHJcbiAgICAgICAgbmF2QnRucy5mb3JFYWNoKChuYXZCdG4sIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gY3VycmVudFN0ZXApIHtcclxuICAgICAgICAgICAgICAgIG5hdkJ0bi5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbmF2QnRuLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGVwID09PSBzdGVwcy5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICAgICAgICBuYXZCdG5zW25hdkJ0bnMubGVuZ3RoIC0gMV0uc3R5bGUuYmFja2dyb3VuZENvbG9yID1cclxuICAgICAgICAgICAgICAgICAgICBcImhzbCgyMjgsIDEwMCUsIDg0JSlcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEZ1bmN0aW9uOiBOZXh0IFN0ZXBcclxuICAgIGZ1bmN0aW9uIGdvVG9OZXh0U3RlcCgpIHtcclxuICAgICAgICBpZiAoY3VycmVudFN0ZXAgPCBzdGVwcy5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnRTdGVwKys7XHJcbiAgICAgICAgICAgIHNob3dTdGVwKGN1cnJlbnRTdGVwKTtcclxuICAgICAgICAgICAgdXBkYXRlTmF2QnRucygpO1xyXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImN1cnJlbnRTdGVwXCIsIEpTT04uc3RyaW5naWZ5KGN1cnJlbnRTdGVwKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEZ1bmN0aW9uOiBQcmV2aW91cyBTdGVwXHJcbiAgICBmdW5jdGlvbiBnb1RvUHJldmlvdXNTdGVwKCkge1xyXG4gICAgICAgIGlmIChjdXJyZW50U3RlcCA+IDApIHtcclxuICAgICAgICAgICAgY3VycmVudFN0ZXAtLTtcclxuICAgICAgICAgICAgc2hvd1N0ZXAoY3VycmVudFN0ZXApO1xyXG4gICAgICAgICAgICB1cGRhdGVOYXZCdG5zKCk7XHJcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiY3VycmVudFN0ZXBcIiwgSlNPTi5zdHJpbmdpZnkoY3VycmVudFN0ZXApKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRnVuY3Rpb246IFVwZGF0ZSBQbGFuIFN0ZXAgMlxyXG4gICAgZnVuY3Rpb24gdXBkYXRlUGxhblN0ZXAoKSB7XHJcbiAgICAgICAgcGxhbklucHV0cy5mb3JFYWNoKChwbGFuSW5wdXQpID0+IHtcclxuICAgICAgICAgICAgaWYgKHBsYW5JbnB1dC5pZCA9PT0gXCJhcmNoYWRlXCIpIHtcclxuICAgICAgICAgICAgICAgIHBsYW5JbnB1dC52YWx1ZSA9IGR1cmF0aW9uID09PSBcInllYXJseVwiID8gOTAgOiA5O1xyXG4gICAgICAgICAgICAgICAgcGxhbklucHV0Lm5leHRFbGVtZW50U2libGluZy50ZXh0Q29udGVudCA9IGAkJHtwbGFuSW5wdXQudmFsdWV9LyR7cGVyfWA7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocGxhbklucHV0LmlkID09PSBcImFkdmFuY2VcIikge1xyXG4gICAgICAgICAgICAgICAgcGxhbklucHV0LnZhbHVlID0gZHVyYXRpb24gPT09IFwieWVhcmx5XCIgPyAxMjAgOiAxMjtcclxuICAgICAgICAgICAgICAgIHBsYW5JbnB1dC5uZXh0RWxlbWVudFNpYmxpbmcudGV4dENvbnRlbnQgPSBgJCR7cGxhbklucHV0LnZhbHVlfS8ke3Blcn1gO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHBsYW5JbnB1dC5pZCA9PT0gXCJwcm9cIikge1xyXG4gICAgICAgICAgICAgICAgcGxhbklucHV0LnZhbHVlID0gZHVyYXRpb24gPT09IFwieWVhcmx5XCIgPyAxNTAgOiAxNTtcclxuICAgICAgICAgICAgICAgIHBsYW5JbnB1dC5uZXh0RWxlbWVudFNpYmxpbmcudGV4dENvbnRlbnQgPSBgJCR7cGxhbklucHV0LnZhbHVlfS8ke3Blcn1gO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHBsYW5JbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHBsYW5JbnB1dC5jaGVja2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGxhbklucHV0LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInNlbGVjdGVkLXBsYW5cIik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHBsYW5JbnB1dC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJzZWxlY3RlZC1wbGFuXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKGR1cmF0aW9uID09PSBcInllYXJseVwiKSB7XHJcbiAgICAgICAgICAgIG1vbnRobHlEZXNjcmlwdGlvbi5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICB5ZWFybHlEZXNjcmlwdGlvbi5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICBkaXNjb3VudHMuZm9yRWFjaCgoZGlzY291bnQpID0+IHtcclxuICAgICAgICAgICAgICAgIGRpc2NvdW50LnRleHRDb250ZW50ID0gXCIyIG1vbnRocyBmcmVlXCI7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHllYXJseURlc2NyaXB0aW9uLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgICAgIG1vbnRobHlEZXNjcmlwdGlvbi5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICBkaXNjb3VudHMuZm9yRWFjaCgoZGlzY291bnQpID0+IHtcclxuICAgICAgICAgICAgICAgIGRpc2NvdW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEZ1bmN0aW9uOiBVcGRhdGUgQWRkb24gU3RlcCAzXHJcbiAgICBmdW5jdGlvbiB1cGRhdGVBZGRvblN0ZXAoKSB7XHJcbiAgICAgICAgYWRkb25JbnB1dHMuZm9yRWFjaCgoYWRkb25JbnB1dCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoYWRkb25JbnB1dC5pZCA9PT0gXCJzZXJ2aWNlXCIpIHtcclxuICAgICAgICAgICAgICAgIGFkZG9uSW5wdXQudmFsdWUgPSBkdXJhdGlvbiA9PT0gXCJ5ZWFybHlcIiA/IDEwIDogMTtcclxuICAgICAgICAgICAgICAgIGFkZG9uSW5wdXQucGFyZW50RWxlbWVudC5sYXN0RWxlbWVudENoaWxkLnRleHRDb250ZW50ID0gYCQke2FkZG9uSW5wdXQudmFsdWV9LyR7cGVyfWA7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYWRkb25JbnB1dC5pZCA9PT0gXCJzdG9yYWdlXCIpIHtcclxuICAgICAgICAgICAgICAgIGFkZG9uSW5wdXQudmFsdWUgPSBkdXJhdGlvbiA9PT0gXCJ5ZWFybHlcIiA/IDIwIDogMjtcclxuICAgICAgICAgICAgICAgIGFkZG9uSW5wdXQucGFyZW50RWxlbWVudC5sYXN0RWxlbWVudENoaWxkLnRleHRDb250ZW50ID0gYCQke2FkZG9uSW5wdXQudmFsdWV9LyR7cGVyfWA7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYWRkb25JbnB1dC5pZCA9PT0gXCJwcm9maWxlXCIpIHtcclxuICAgICAgICAgICAgICAgIGFkZG9uSW5wdXQudmFsdWUgPSBkdXJhdGlvbiA9PT0gXCJ5ZWFybHlcIiA/IDIwIDogMjtcclxuICAgICAgICAgICAgICAgIGFkZG9uSW5wdXQucGFyZW50RWxlbWVudC5sYXN0RWxlbWVudENoaWxkLnRleHRDb250ZW50ID0gYCQke2FkZG9uSW5wdXQudmFsdWV9LyR7cGVyfWA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBGdW5jdGlvbjogVXBkYXRlIFBsYW4gU3VtbWFyeSBTdGVwIDRcclxuICAgIGZ1bmN0aW9uIHVwZGF0ZVBsYW5TdW1tYXJ5KCkge1xyXG4gICAgICAgIGNvbnN0IHN1bW1hcnlQbGFuVGl0bGUgPSBmdW5jLnNlbGVjdChcIi5zdW1tYXJ5LXBsYW4tdGl0bGVcIik7XHJcbiAgICAgICAgY29uc3Qgc3VtbWFyeVBsYW5QcmljZSA9IGZ1bmMuc2VsZWN0KFwiLnN1bW1hcnktcGxhbi1wcmljZVwiKTtcclxuICAgICAgICBjb25zdCBzdW1tYXJ5UGxhbkNoYW5nZUxpbmsgPSBmdW5jLnNlbGVjdChcIi5zdW1tYXJ5LXBsYW4tY2hhbmdlLWxpbmtcIik7XHJcblxyXG4gICAgICAgIC8vIFBsYW4gU3VtbWFyeVxyXG4gICAgICAgIHBsYW5JbnB1dHMuZm9yRWFjaCgocGxhbklucHV0KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChwbGFuSW5wdXQuY2hlY2tlZCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRQbGFuID0gcGxhbklucHV0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudDtcclxuICAgICAgICAgICAgICAgIGxldCBzZWxlY3RlZFBsYW5UaXRsZSA9XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRQbGFuLnF1ZXJ5U2VsZWN0b3IoXCIucGxhbi10aXRsZVwiKTtcclxuICAgICAgICAgICAgICAgIGxldCBzZWxlY3RlZFBsYW5QcmljZSA9XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRQbGFuLnF1ZXJ5U2VsZWN0b3IoXCIucGxhbi1wcmljZVwiKTtcclxuICAgICAgICAgICAgICAgIHN1bW1hcnlQbGFuVGl0bGUudGV4dENvbnRlbnQgPSBgJHtzZWxlY3RlZFBsYW5UaXRsZS50ZXh0Q29udGVudH0gKCR7ZHVyYXRpb259KWA7XHJcbiAgICAgICAgICAgICAgICBzdW1tYXJ5UGxhblByaWNlLnRleHRDb250ZW50ID0gYCR7c2VsZWN0ZWRQbGFuUHJpY2UudGV4dENvbnRlbnR9YDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIFBsYW4gQ2hhbmdlIExpbmtcclxuICAgICAgICBzdW1tYXJ5UGxhbkNoYW5nZUxpbmsuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgY3VycmVudFN0ZXAgPSAxO1xyXG4gICAgICAgICAgICBzaG93U3RlcChjdXJyZW50U3RlcCk7XHJcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiY3VycmVudFN0ZXBcIiwgSlNPTi5zdHJpbmdpZnkoY3VycmVudFN0ZXApKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBGdW5jdGlvbjogVXBkYXRlIEFkZG9uIFN1bW1hcnlcclxuICAgIGZ1bmN0aW9uIHVwZGF0ZUFkZG9uU3VtbWFyeSgpIHtcclxuICAgICAgICBhZGRvbklucHV0cy5mb3JFYWNoKChhZGRvbklucHV0KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFkZG9uTGFiZWwgPSBhZGRvbklucHV0LnBhcmVudEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIGNvbnN0IGFkZG9uVGl0bGUgPSBhZGRvbkxhYmVsLnF1ZXJ5U2VsZWN0b3IoXCIuYWRkb24tdGl0bGVcIik7XHJcbiAgICAgICAgICAgIGNvbnN0IGFkZG9uUHJpY2UgPSBhZGRvbkxhYmVsLnF1ZXJ5U2VsZWN0b3IoXCIuYWRkb24tcHJpY2VcIik7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBsaSA9IGZ1bmMuY3JlYXRlKFwibGlcIik7XHJcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRJdGVtSWQgPSBgJHthZGRvbklucHV0LmlkfXN1bW1hcnlgO1xyXG4gICAgICAgICAgICBsaS5pZCA9IGN1cnJlbnRJdGVtSWQ7XHJcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRJdGVtID0gZnVuYy5zZWxlY3QoYCMke2N1cnJlbnRJdGVtSWR9YCk7XHJcblxyXG4gICAgICAgICAgICBsaS5jbGFzc0xpc3QuYWRkKFwiZmxleFwiLCBcIml0ZW0tY2VudGVyXCIsIFwianVzdGlmeS1iZXR3ZWVuXCIpO1xyXG4gICAgICAgICAgICBsaS5pbm5lckhUTUwgPSBgXHJcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInRleHQtc20gdGV4dC1ncmF5LTcwMFwiPiR7YWRkb25UaXRsZS50ZXh0Q29udGVudH08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInRleHQtc21cIj4ke2FkZG9uUHJpY2UudGV4dENvbnRlbnR9PC9zcGFuPlxyXG4gICAgICAgICAgICBgO1xyXG5cclxuICAgICAgICAgICAgaWYgKGFkZG9uSW5wdXQuY2hlY2tlZCAmJiAhY3VycmVudEl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIHN1bW1hcnlBZGRvbkxpc3QuYXBwZW5kKGxpKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICghYWRkb25JbnB1dC5jaGVja2VkICYmIGN1cnJlbnRJdGVtKSB7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50SXRlbS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEZ1bnRpb246IENhbGN1bGF0ZSBQbGFuIENvc3RcclxuICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZVBsYW5Db3N0KCkge1xyXG4gICAgICAgIGxldCBwbGFuQ29zdCA9IDA7XHJcbiAgICAgICAgcGxhbklucHV0cy5mb3JFYWNoKChwbGFuSW5wdXQpID0+IHtcclxuICAgICAgICAgICAgaWYgKHBsYW5JbnB1dC5jaGVja2VkICYmIHBsYW5JbnB1dC5pZCA9PT0gXCJhcmNoYWRlXCIpIHtcclxuICAgICAgICAgICAgICAgIHBsYW5Db3N0ID0gZHVyYXRpb24gPT09IFwieWVhcmx5XCIgPyA5MCA6IDk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocGxhbklucHV0LmNoZWNrZWQgJiYgcGxhbklucHV0LmlkID09PSBcImFkdmFuY2VcIikge1xyXG4gICAgICAgICAgICAgICAgcGxhbkNvc3QgPSBkdXJhdGlvbiA9PT0gXCJ5ZWFybHlcIiA/IDEyMCA6IDEyO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHBsYW5JbnB1dC5jaGVja2VkICYmIHBsYW5JbnB1dC5pZCA9PT0gXCJwcm9cIikge1xyXG4gICAgICAgICAgICAgICAgcGxhbkNvc3QgPSBkdXJhdGlvbiA9PT0gXCJ5ZWFybHlcIiA/IDE1MCA6IDE1O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHBsYW5Db3N0O1xyXG4gICAgfVxyXG4gICAgbGV0IHBsYW5Db3N0ID0gY2FsY3VsYXRlUGxhbkNvc3QoKTtcclxuICAgIC8vIEZ1bmN0aW9uOiBDYWxjdWxhdGUgQWRkb24gQ29zdFxyXG4gICAgZnVuY3Rpb24gY2FsY3VsYXRlQWRkb25Db3N0KCkge1xyXG4gICAgICAgIGxldCBhZGRvbnNDb3N0ID0gMDtcclxuICAgICAgICBhZGRvbklucHV0cy5mb3JFYWNoKChhZGRvbklucHV0KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChhZGRvbklucHV0LmNoZWNrZWQgJiYgYWRkb25JbnB1dC5pZCA9PT0gXCJzZXJ2aWNlXCIpIHtcclxuICAgICAgICAgICAgICAgIGxldCBhZGRvbkNvc3QgPSBkdXJhdGlvbiA9PT0gXCJ5ZWFybHlcIiA/IDEwIDogMTtcclxuICAgICAgICAgICAgICAgIGFkZG9uc0Nvc3QgKz0gYWRkb25Db3N0O1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKFxyXG4gICAgICAgICAgICAgICAgYWRkb25JbnB1dC5jaGVja2VkICYmXHJcbiAgICAgICAgICAgICAgICAoYWRkb25JbnB1dC5pZCA9PT0gXCJzdG9yYWdlXCIgfHwgYWRkb25JbnB1dC5pZCA9PT0gXCJwcm9maWxlXCIpXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGFkZG9uQ29zdCA9IGR1cmF0aW9uID09PSBcInllYXJseVwiID8gMjAgOiAyO1xyXG4gICAgICAgICAgICAgICAgYWRkb25zQ29zdCArPSBhZGRvbkNvc3Q7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gYWRkb25zQ29zdDtcclxuICAgIH1cclxuICAgIGxldCBhZGRvbnNDb3N0ID0gY2FsY3VsYXRlQWRkb25Db3N0KCk7XHJcblxyXG4gICAgbGV0IHRvdGFsQ29zdCA9IHBsYW5Db3N0ICsgYWRkb25zQ29zdDtcclxuXHJcbiAgICAvLyBGdW5jdGlvbjogVXBkYXRlIFRvdGFsIFN1bW1hcnlcclxuICAgIGZ1bmN0aW9uIHVwZGF0ZVRvdGFsU3VtbWFyeSgpIHtcclxuICAgICAgICBjb25zdCB0b3RhbFRpdGxlID0gZnVuYy5zZWxlY3QoXCIudG90YWwtdGl0bGVcIik7XHJcbiAgICAgICAgdG90YWxUaXRsZS5jbGFzc0xpc3QuYWRkKFwidGV4dC1zbVwiKTtcclxuICAgICAgICBjb25zdCB0b3RhbFByaWNlID0gZnVuYy5zZWxlY3QoXCIudG90YWwtcHJpY2VcIik7XHJcbiAgICAgICAgdG90YWxQcmljZS5jbGFzc0xpc3QuYWRkKFxyXG4gICAgICAgICAgICBcInRleHQtbGdcIixcclxuICAgICAgICAgICAgXCJmb250LWJvbGRcIixcclxuICAgICAgICAgICAgXCJ0ZXh0LVtoc2woMjQzLF8xMDAlLF82MiUpXVwiXHJcbiAgICAgICAgKTtcclxuICAgICAgICB0b3RhbFRpdGxlLnRleHRDb250ZW50ID0gYFRvdGFsIChwZXIgJHtkdXJhdGlvbi5zbGljZSgwLCAtMil9KWA7XHJcbiAgICAgICAgdG90YWxQcmljZS50ZXh0Q29udGVudCA9IGAkJHt0b3RhbENvc3R9LyR7cGVyfWA7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gZnVuY3Rpb246IFZhbGlkYXRlIEZvcm1cclxuICAgIGZ1bmN0aW9uIHZhbGlkYXRlRm9ybSgpIHtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIGN1cnJlbnRTdGVwID09PSAwICYmXHJcbiAgICAgICAgICAgIChuYW1lSW5wdXQudmFsdWUgPT09IFwiXCIgfHxcclxuICAgICAgICAgICAgICAgIGVtYWlsSW5wdXQudmFsdWUgPT09IFwiXCIgfHxcclxuICAgICAgICAgICAgICAgIHBob25lSW5wdXQudmFsdWUgPT09IFwiXCIpXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGludmFsaWRNZXNzYWdlID0gZnVuYy5jcmVhdGUoXCJwXCIpO1xyXG4gICAgICAgICAgICBpbnZhbGlkTWVzc2FnZS5jbGFzc0xpc3QuYWRkKFxyXG4gICAgICAgICAgICAgICAgXCJhYnNvbHV0ZVwiLFxyXG4gICAgICAgICAgICAgICAgXCJ0ZXh0LXJlZC03MDBcIixcclxuICAgICAgICAgICAgICAgIFwiLXRvcC01XCIsXHJcbiAgICAgICAgICAgICAgICBcImxlZnQtMFwiXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGludmFsaWRNZXNzYWdlLmlkID0gXCJpbnZhbGlkLW1lc3NhZ2UxXCI7XHJcbiAgICAgICAgICAgIGNvbnN0IGhhc0ludmFsaWRNZXNzYWdlMSA9IGZ1bmMuc2VsZWN0KFwiI2ludmFsaWQtbWVzc2FnZTFcIik7XHJcbiAgICAgICAgICAgIGludmFsaWRNZXNzYWdlLnRleHRDb250ZW50ID0gXCJBbGwgZmllbGRzIGFyZSByZXF1aXJlZFwiO1xyXG4gICAgICAgICAgICBjb25zdCBzaG93ZWRGb3JtUG9ydGlvbiA9IGZ1bmMuc2VsZWN0KGAjc3RlcDFgKTtcclxuICAgICAgICAgICAgY29uc3QgaW5wdXRXcmFwcGVyID1cclxuICAgICAgICAgICAgICAgIHNob3dlZEZvcm1Qb3J0aW9uLnF1ZXJ5U2VsZWN0b3IoXCIuaW5wdXQtd3JhcHBlclwiKTtcclxuICAgICAgICAgICAgaWYgKCFoYXNJbnZhbGlkTWVzc2FnZTEpIHtcclxuICAgICAgICAgICAgICAgIGlucHV0V3JhcHBlci5hcHBlbmQoaW52YWxpZE1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaW52YWxpZE1lc3NhZ2UucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIH0sIDUwMDApO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgY3VycmVudFN0ZXAgPT09IDEgJiZcclxuICAgICAgICAgICAgIXBsYW5JbnB1dHNbMF0uY2hlY2tlZCAmJlxyXG4gICAgICAgICAgICAhcGxhbklucHV0c1sxXS5jaGVja2VkICYmXHJcbiAgICAgICAgICAgICFwbGFuSW5wdXRzWzJdLmNoZWNrZWRcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgY29uc3QgaW52YWxpZE1lc3NhZ2UgPSBmdW5jLmNyZWF0ZShcInBcIik7XHJcbiAgICAgICAgICAgIGludmFsaWRNZXNzYWdlLmNsYXNzTGlzdC5hZGQoXHJcbiAgICAgICAgICAgICAgICBcImFic29sdXRlXCIsXHJcbiAgICAgICAgICAgICAgICBcInRleHQtcmVkLTcwMFwiLFxyXG4gICAgICAgICAgICAgICAgXCItdG9wLTVcIixcclxuICAgICAgICAgICAgICAgIFwibGVmdC0wXCJcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgaW52YWxpZE1lc3NhZ2UuaWQgPSBcImludmFsaWQtbWVzc2FnZTJcIjtcclxuICAgICAgICAgICAgY29uc3QgaGFzSW52YWxpZE1lc3NhZ2UyID0gZnVuYy5zZWxlY3QoXCIjaW52YWxpZC1tZXNzYWdlMlwiKTtcclxuICAgICAgICAgICAgaW52YWxpZE1lc3NhZ2UudGV4dENvbnRlbnQgPSBcIllvdSBkaWRuJ3QgY2hvb3NlIGFueSBwbGFuXCI7XHJcbiAgICAgICAgICAgIGNvbnN0IHNob3dlZEZvcm1Qb3J0aW9uID0gZnVuYy5zZWxlY3QoYCNzdGVwMmApO1xyXG4gICAgICAgICAgICBjb25zdCBpbnB1dFdyYXBwZXIyID1cclxuICAgICAgICAgICAgICAgIHNob3dlZEZvcm1Qb3J0aW9uLnF1ZXJ5U2VsZWN0b3IoXCIuaW5wdXQtd3JhcHBlclwiKTtcclxuICAgICAgICAgICAgaWYgKCFoYXNJbnZhbGlkTWVzc2FnZTIpIHtcclxuICAgICAgICAgICAgICAgIGlucHV0V3JhcHBlcjIuYXBwZW5kKGludmFsaWRNZXNzYWdlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGludmFsaWRNZXNzYWdlLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICB9LCA1MDAwKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBGdW5jdGlvbjogU2V0IExvY2FsIFN0b3JhZ2VcclxuICAgIGZ1bmN0aW9uIHNldExvY2FsU3RvcmFnZSgpIHtcclxuICAgICAgICBpZiAoY3VycmVudFN0ZXAgPT09IDEpIHtcclxuICAgICAgICAgICAgcGxhbklucHV0cy5mb3JFYWNoKChwbGFuSW5wdXQsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcclxuICAgICAgICAgICAgICAgICAgICBgcGxhbklucHV0JHtpbmRleH1gLFxyXG4gICAgICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHBsYW5JbnB1dC5jaGVja2VkID09PSB0cnVlID8gdHJ1ZSA6IGZhbHNlKVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjdXJyZW50U3RlcCA9PT0gMikge1xyXG4gICAgICAgICAgICBhZGRvbklucHV0cy5mb3JFYWNoKChhZGRvbklucHV0LCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXHJcbiAgICAgICAgICAgICAgICAgICAgYGFkZG9uSW5wdXQke2luZGV4fWAsXHJcbiAgICAgICAgICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkoYWRkb25JbnB1dC5jaGVja2VkID09PSB0cnVlID8gdHJ1ZSA6IGZhbHNlKVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEZ1bmN0aW9uOiBHZXQgTG9jYWwgU3RvcmFnZVxyXG4gICAgZnVuY3Rpb24gZ2V0TG9jYWxTdG9yYWdlKCkge1xyXG4gICAgICAgIHBsYW5JbnB1dHMuZm9yRWFjaCgocGxhbklucHV0LCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICBwbGFuSW5wdXQuY2hlY2tlZCA9IEpTT04ucGFyc2UoXHJcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShgcGxhbklucHV0JHtpbmRleH1gKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGFkZG9uSW5wdXRzLmZvckVhY2goKGFkZG9uSW5wdXQsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIGFkZG9uSW5wdXQuY2hlY2tlZCA9IEpTT04ucGFyc2UoXHJcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShgYWRkb25JbnB1dCR7aW5kZXh9YClcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBGdW5jdGlvbjogaW5pdGlhbGl6YXRpb25cclxuICAgIGZ1bmN0aW9uIGluaXRpYWxpemVGb3JtKCkge1xyXG4gICAgICAgIHNob3dTdGVwKGN1cnJlbnRTdGVwKTtcclxuICAgICAgICB1cGRhdGVOYXZCdG5zKCk7XHJcbiAgICAgICAgdXBkYXRlUGxhblN0ZXAoKTsgLy8gY2F1c2UgcHJvYmxlbSBzb21lIHRpbWVcclxuICAgICAgICB1cGRhdGVBZGRvblN0ZXAoKTtcclxuICAgICAgICB1cGRhdGVQbGFuU3VtbWFyeSgpO1xyXG4gICAgICAgIHVwZGF0ZUFkZG9uU3VtbWFyeSgpO1xyXG5cclxuICAgICAgICBwcmV2QnRucy5mb3JFYWNoKChwcmV2QnRuKSA9PiB7XHJcbiAgICAgICAgICAgIHByZXZCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGdvVG9QcmV2aW91c1N0ZXApO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBuZXh0QnRucy5mb3JFYWNoKChuZXh0QnRuKSA9PiB7XHJcbiAgICAgICAgICAgIG5leHRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh2YWxpZGF0ZUZvcm0oKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldExvY2FsU3RvcmFnZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGdvVG9OZXh0U3RlcCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbmFtZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwibmFtZUlucHV0XCIsIEpTT04uc3RyaW5naWZ5KG5hbWVJbnB1dC52YWx1ZSkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGVtYWlsSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsICgpID0+IHtcclxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXHJcbiAgICAgICAgICAgICAgICBcImVtYWlsSW5wdXRcIixcclxuICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KGVtYWlsSW5wdXQudmFsdWUpXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcGhvbmVJbnB1dC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcclxuICAgICAgICAgICAgICAgIFwicGhvbmVJbnB1dFwiLFxyXG4gICAgICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkocGhvbmVJbnB1dC52YWx1ZSlcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcGxhbklucHV0cy5mb3JFYWNoKChwbGFuSW5wdXQpID0+IHtcclxuICAgICAgICAgICAgcGxhbklucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVQbGFuU3VtbWFyeSgpO1xyXG4gICAgICAgICAgICAgICAgcGxhbkNvc3QgPSBjYWxjdWxhdGVQbGFuQ29zdCgpO1xyXG4gICAgICAgICAgICAgICAgdG90YWxDb3N0ID0gcGxhbkNvc3QgKyBhZGRvbnNDb3N0O1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlVG90YWxTdW1tYXJ5KCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJlbnRMYWJlbCA9IHBsYW5JbnB1dC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgcGxhbkxhYmVscy5mb3JFYWNoKChwbGFuTGFiZWwpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBwbGFuTGFiZWwuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChwbGFuSW5wdXQuY2hlY2tlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudExhYmVsLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBhZGRvbklucHV0cy5mb3JFYWNoKChhZGRvbklucHV0KSA9PiB7XHJcbiAgICAgICAgICAgIGFkZG9uSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZVBsYW5TdW1tYXJ5KCk7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVBZGRvblN1bW1hcnkoKTtcclxuICAgICAgICAgICAgICAgIGFkZG9uc0Nvc3QgPSBjYWxjdWxhdGVBZGRvbkNvc3QoKTtcclxuICAgICAgICAgICAgICAgIHRvdGFsQ29zdCA9IHBsYW5Db3N0ICsgYWRkb25zQ29zdDtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZVRvdGFsU3VtbWFyeSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbmV4dEJ0bnMuZm9yRWFjaCgobmV4dEJ0bikgPT4ge1xyXG4gICAgICAgICAgICBuZXh0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudFN0ZXAgPT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVQbGFuU3RlcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVBsYW5TdW1tYXJ5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlQWRkb25TdW1tYXJ5KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0b2dnbGVJbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGR1cmF0aW9uID0gdG9nZ2xlLmNoZWNrZWQgPyBcInllYXJseVwiIDogXCJtb250aGx5XCI7XHJcbiAgICAgICAgICAgIHBlciA9IGR1cmF0aW9uID09PSBcInllYXJseVwiID8gXCJ5clwiIDogXCJtb1wiO1xyXG4gICAgICAgICAgICB1cGRhdGVQbGFuU3RlcCgpO1xyXG4gICAgICAgICAgICB1cGRhdGVBZGRvblN0ZXAoKTtcclxuICAgICAgICAgICAgdXBkYXRlUGxhblN1bW1hcnkoKTtcclxuICAgICAgICAgICAgd2hpbGUgKHN1bW1hcnlBZGRvbkxpc3QuZmlyc3RFbGVtZW50Q2hpbGQpIHtcclxuICAgICAgICAgICAgICAgIHN1bW1hcnlBZGRvbkxpc3QucmVtb3ZlQ2hpbGQoXHJcbiAgICAgICAgICAgICAgICAgICAgc3VtbWFyeUFkZG9uTGlzdC5maXJzdEVsZW1lbnRDaGlsZFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB1cGRhdGVBZGRvblN1bW1hcnkoKTtcclxuICAgICAgICAgICAgcGxhbkNvc3QgPSBjYWxjdWxhdGVQbGFuQ29zdCgpO1xyXG4gICAgICAgICAgICBhZGRvbnNDb3N0ID0gY2FsY3VsYXRlQWRkb25Db3N0KCk7XHJcbiAgICAgICAgICAgIHRvdGFsQ29zdCA9IHBsYW5Db3N0ICsgYWRkb25zQ29zdDtcclxuICAgICAgICAgICAgdXBkYXRlVG90YWxTdW1tYXJ5KCk7XHJcblxyXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImR1cmF0aW9uXCIsIEpTT04uc3RyaW5naWZ5KGR1cmF0aW9uKSk7XHJcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwicGVyXCIsIEpTT04uc3RyaW5naWZ5KHBlcikpO1xyXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcclxuICAgICAgICAgICAgICAgIFwidG9nZ2xlSW5wdXRcIixcclxuICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHRvZ2dsZUlucHV0LmNoZWNrZWQgPyB0cnVlIDogZmFsc2UpXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmIChjdXJyZW50U3RlcCA9PT0gc3RlcHMubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2UuY2xlYXIoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdGlhbGl6ZUZvcm0oKTtcclxufSk7XHJcbi8vIHN0ZXBzW2N1cnJlbnRTdGVwXS5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XHJcblxyXG4vLyBuZXh0QnRucy5mb3JFYWNoKChuZXh0QnRuKSA9PiB7XHJcbi8vICAgICBuZXh0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG4vLyAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuLy8gICAgICAgICBpZiAoY3VycmVudFN0ZXAgPCBzdGVwcy5sZW5ndGggLSAxKSB7XHJcbi8vICAgICAgICAgICAgIHN0ZXBzW2N1cnJlbnRTdGVwXS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbi8vICAgICAgICAgICAgIGN1cnJlbnRTdGVwKys7XHJcbi8vICAgICAgICAgICAgIHN0ZXBzW2N1cnJlbnRTdGVwXS5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XHJcbi8vICAgICAgICAgfVxyXG4vLyAgICAgfSk7XHJcbi8vIH0pO1xyXG5cclxuLy8gcHJldkJ0bnMuZm9yRWFjaCgocHJldkJ0bikgPT4ge1xyXG4vLyAgICAgcHJldkJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuLy8gICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbi8vICAgICAgICAgaWYgKGN1cnJlbnRTdGVwID4gMCkge1xyXG4vLyAgICAgICAgICAgICBzdGVwc1tjdXJyZW50U3RlcF0uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4vLyAgICAgICAgICAgICBjdXJyZW50U3RlcC0tO1xyXG4vLyAgICAgICAgICAgICBzdGVwc1tjdXJyZW50U3RlcF0uc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xyXG4vLyAgICAgICAgIH1cclxuLy8gICAgIH0pO1xyXG4vLyB9KTtcclxuXHJcbi8vIG5hdkJ0bnMuZm9yRWFjaCgobmF2QnRuLCBpbmRleCkgPT4ge1xyXG4vLyAgICAgaWYgKGluZGV4ID09IGN1cnJlbnRTdGVwKSB7XHJcbi8vICAgICAgICAgbmF2QnRuLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwiaHNsKDIyOCwgMTAwJSwgODQlKVwiO1xyXG4vLyAgICAgfSBlbHNlIHtcclxuLy8gICAgICAgICBuYXZCdG4uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJ0cmFuc3BhcmVudFwiO1xyXG4vLyAgICAgfVxyXG4vLyB9KTtcclxuXHJcbi8vIHN0ZXBMaW5rcy5mb3JFYWNoKChzdGVwTGluaywgaW5kZXgpID0+IHtcclxuLy8gICAgIHN0ZXBMaW5rLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG4vLyAgICAgICAgIGUucHJldmVudERlZmF1bHQ7XHJcbi8vICAgICAgICAgc3RlcHNbY3VycmVudFN0ZXBdLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuLy8gICAgICAgICBjdXJyZW50U3RlcCA9IHN0ZXBMaW5rLmRhdGFzZXQuc3RlcDtcclxuLy8gICAgICAgICBzdGVwc1tjdXJyZW50U3RlcF0uc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xyXG4vLyAgICAgfSk7XHJcbi8vIH0pO1xyXG5cclxuLy8gc3RlcCAyXHJcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4vLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuX193ZWJwYWNrX3JlcXVpcmVfXy5tID0gX193ZWJwYWNrX21vZHVsZXNfXztcblxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqLCBwcm9wKSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKTsgfSIsIi8vIG5vIGJhc2VVUklcblxuLy8gb2JqZWN0IHRvIHN0b3JlIGxvYWRlZCBhbmQgbG9hZGluZyBjaHVua3Ncbi8vIHVuZGVmaW5lZCA9IGNodW5rIG5vdCBsb2FkZWQsIG51bGwgPSBjaHVuayBwcmVsb2FkZWQvcHJlZmV0Y2hlZFxuLy8gW3Jlc29sdmUsIHJlamVjdCwgUHJvbWlzZV0gPSBjaHVuayBsb2FkaW5nLCAwID0gY2h1bmsgbG9hZGVkXG52YXIgaW5zdGFsbGVkQ2h1bmtzID0ge1xuXHQ0NzogMCxcblx0Nzk6IDBcbn07XG5cbi8vIG5vIGNodW5rIG9uIGRlbWFuZCBsb2FkaW5nXG5cbi8vIG5vIHByZWZldGNoaW5nXG5cbi8vIG5vIHByZWxvYWRlZFxuXG4vLyBubyBITVJcblxuLy8gbm8gSE1SIG1hbmlmZXN0XG5cbl9fd2VicGFja19yZXF1aXJlX18uTy5qID0gZnVuY3Rpb24oY2h1bmtJZCkgeyByZXR1cm4gaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID09PSAwOyB9O1xuXG4vLyBpbnN0YWxsIGEgSlNPTlAgY2FsbGJhY2sgZm9yIGNodW5rIGxvYWRpbmdcbnZhciB3ZWJwYWNrSnNvbnBDYWxsYmFjayA9IGZ1bmN0aW9uKHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uLCBkYXRhKSB7XG5cdHZhciBjaHVua0lkcyA9IGRhdGFbMF07XG5cdHZhciBtb3JlTW9kdWxlcyA9IGRhdGFbMV07XG5cdHZhciBydW50aW1lID0gZGF0YVsyXTtcblx0Ly8gYWRkIFwibW9yZU1vZHVsZXNcIiB0byB0aGUgbW9kdWxlcyBvYmplY3QsXG5cdC8vIHRoZW4gZmxhZyBhbGwgXCJjaHVua0lkc1wiIGFzIGxvYWRlZCBhbmQgZmlyZSBjYWxsYmFja1xuXHR2YXIgbW9kdWxlSWQsIGNodW5rSWQsIGkgPSAwO1xuXHRpZihjaHVua0lkcy5zb21lKGZ1bmN0aW9uKGlkKSB7IHJldHVybiBpbnN0YWxsZWRDaHVua3NbaWRdICE9PSAwOyB9KSkge1xuXHRcdGZvcihtb2R1bGVJZCBpbiBtb3JlTW9kdWxlcykge1xuXHRcdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKG1vcmVNb2R1bGVzLCBtb2R1bGVJZCkpIHtcblx0XHRcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tW21vZHVsZUlkXSA9IG1vcmVNb2R1bGVzW21vZHVsZUlkXTtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYocnVudGltZSkgdmFyIHJlc3VsdCA9IHJ1bnRpbWUoX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cdH1cblx0aWYocGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24pIHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uKGRhdGEpO1xuXHRmb3IoO2kgPCBjaHVua0lkcy5sZW5ndGg7IGkrKykge1xuXHRcdGNodW5rSWQgPSBjaHVua0lkc1tpXTtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oaW5zdGFsbGVkQ2h1bmtzLCBjaHVua0lkKSAmJiBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0pIHtcblx0XHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXVswXSgpO1xuXHRcdH1cblx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSAwO1xuXHR9XG5cdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLk8ocmVzdWx0KTtcbn1cblxudmFyIGNodW5rTG9hZGluZ0dsb2JhbCA9IHNlbGZbXCJ3ZWJwYWNrQ2h1bmtiaXR0ZWNoZGV2ZWxvcGVyX2dpdGh1Yl9pb1wiXSA9IHNlbGZbXCJ3ZWJwYWNrQ2h1bmtiaXR0ZWNoZGV2ZWxvcGVyX2dpdGh1Yl9pb1wiXSB8fCBbXTtcbmNodW5rTG9hZGluZ0dsb2JhbC5mb3JFYWNoKHdlYnBhY2tKc29ucENhbGxiYWNrLmJpbmQobnVsbCwgMCkpO1xuY2h1bmtMb2FkaW5nR2xvYmFsLnB1c2ggPSB3ZWJwYWNrSnNvbnBDYWxsYmFjay5iaW5kKG51bGwsIGNodW5rTG9hZGluZ0dsb2JhbC5wdXNoLmJpbmQoY2h1bmtMb2FkaW5nR2xvYmFsKSk7IiwiLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vLyBUaGlzIGVudHJ5IG1vZHVsZSBkZXBlbmRzIG9uIG90aGVyIGxvYWRlZCBjaHVua3MgYW5kIGV4ZWN1dGlvbiBuZWVkIHRvIGJlIGRlbGF5ZWRcbnZhciBfX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXy5PKHVuZGVmaW5lZCwgWzc5XSwgZnVuY3Rpb24oKSB7IHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0NCk7IH0pXG5fX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXy5PKF9fd2VicGFja19leHBvcnRzX18pO1xuIl0sIm5hbWVzIjpbImRlZmVycmVkIiwic2VsZWN0IiwiZWxlbWVudCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInNlbGVjdEFsbCIsImVsZW1lbnRzIiwicXVlcnlTZWxlY3RvckFsbCIsImNyZWF0ZSIsInRleHQiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJjcmVhdGVkRWxlbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJ0ZXh0Q29udGVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJzdGVwcyIsImZ1bmMiLCJuZXh0QnRucyIsInByZXZCdG5zIiwibmF2QnRucyIsInRvZ2dsZUlucHV0IiwiY2hlY2tlZCIsIkpTT04iLCJwYXJzZSIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJuYW1lSW5wdXQiLCJ2YWx1ZSIsImVtYWlsSW5wdXQiLCJwaG9uZUlucHV0IiwicGxhbklucHV0cyIsIl90b0NvbnN1bWFibGVBcnJheSIsInBsYW5MYWJlbHMiLCJtb250aGx5RGVzY3JpcHRpb24iLCJ5ZWFybHlEZXNjcmlwdGlvbiIsImRpc2NvdW50cyIsInBlciIsImFkZG9uSW5wdXRzIiwic3VtbWFyeUFkZG9uTGlzdCIsImR1cmF0aW9uIiwiY3VycmVudFN0ZXAiLCJzaG93U3RlcCIsInN0ZXBJbmRleCIsImZvckVhY2giLCJzdGVwIiwiaW5kZXgiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJ1cGRhdGVOYXZCdG5zIiwibmF2QnRuIiwic3R5bGUiLCJiYWNrZ3JvdW5kQ29sb3IiLCJnb1RvUHJldmlvdXNTdGVwIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsInVwZGF0ZVBsYW5TdGVwIiwicGxhbklucHV0IiwiaWQiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJjb25jYXQiLCJwYXJlbnRFbGVtZW50IiwiZGlzY291bnQiLCJ1cGRhdGVBZGRvblN0ZXAiLCJhZGRvbklucHV0IiwibGFzdEVsZW1lbnRDaGlsZCIsInVwZGF0ZVBsYW5TdW1tYXJ5Iiwic3VtbWFyeVBsYW5UaXRsZSIsInN1bW1hcnlQbGFuUHJpY2UiLCJzdW1tYXJ5UGxhbkNoYW5nZUxpbmsiLCJzZWxlY3RlZFBsYW4iLCJzZWxlY3RlZFBsYW5UaXRsZSIsInNlbGVjdGVkUGxhblByaWNlIiwidXBkYXRlQWRkb25TdW1tYXJ5IiwiYWRkb25MYWJlbCIsImFkZG9uVGl0bGUiLCJhZGRvblByaWNlIiwibGkiLCJjdXJyZW50SXRlbUlkIiwiY3VycmVudEl0ZW0iLCJpbm5lckhUTUwiLCJhcHBlbmQiLCJjYWxjdWxhdGVQbGFuQ29zdCIsInBsYW5Db3N0IiwiY2FsY3VsYXRlQWRkb25Db3N0IiwiYWRkb25zQ29zdCIsInRvdGFsQ29zdCIsInVwZGF0ZVRvdGFsU3VtbWFyeSIsInRvdGFsVGl0bGUiLCJ0b3RhbFByaWNlIiwic2xpY2UiLCJwcmV2QnRuIiwibmV4dEJ0biIsImludmFsaWRNZXNzYWdlIiwiaGFzSW52YWxpZE1lc3NhZ2UxIiwiaW5wdXRXcmFwcGVyIiwic2V0VGltZW91dCIsImhhc0ludmFsaWRNZXNzYWdlMiIsImlucHV0V3JhcHBlcjIiLCJ2YWxpZGF0ZUZvcm0iLCJwYXJlbnRMYWJlbCIsInBsYW5MYWJlbCIsImUiLCJ0b2dnbGUiLCJmaXJzdEVsZW1lbnRDaGlsZCIsInJlbW92ZUNoaWxkIiwiY2xlYXIiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsIm0iLCJPIiwicmVzdWx0IiwiY2h1bmtJZHMiLCJmbiIsInByaW9yaXR5Iiwibm90RnVsZmlsbGVkIiwiSW5maW5pdHkiLCJpIiwiZnVsZmlsbGVkIiwiaiIsIk9iamVjdCIsImtleXMiLCJldmVyeSIsImtleSIsInNwbGljZSIsInIiLCJvIiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImluc3RhbGxlZENodW5rcyIsImNodW5rSWQiLCJ3ZWJwYWNrSnNvbnBDYWxsYmFjayIsInBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uIiwiZGF0YSIsIm1vcmVNb2R1bGVzIiwicnVudGltZSIsInNvbWUiLCJjaHVua0xvYWRpbmdHbG9iYWwiLCJzZWxmIiwiYmluZCIsInB1c2giLCJfX3dlYnBhY2tfZXhwb3J0c19fIl0sInNvdXJjZVJvb3QiOiIifQ==