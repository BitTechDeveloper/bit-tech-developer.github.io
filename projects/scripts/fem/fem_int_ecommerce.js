!function(){"use strict";var t,e={839:function(){function t(t){return document.querySelector(t)}function e(t){return document.querySelectorAll(t)}function n(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}document.addEventListener("DOMContentLoaded",(function(){t("body");var r=n(e(".thumbnail-img")),o=e(".large-img"),c=t(".lightbox-overlay"),a=(c.querySelector(".next"),c.querySelector(".prev"),t(".lightbox-close-img")),i=t(".cart-wrapper"),s=t(".cart-dropdown"),l=t(".dropdown-content"),d=t(".dropdown-content-empty"),u=t(".item-dropdown-display"),f=t(".total-price-dropdown-display"),m=t(".dropdown-delete"),v=t(".checkout"),p=t(".plus"),g=t(".minus"),h=t(".item-amount-display"),L=t(".add-to-cart"),y=t(".cart-badge"),S=n(r.map((function(t){return t.src.replace("-thumbnail","")}))),E=e(".next"),b=e(".prev"),O=t(".hamburger-wrapper"),k=t(".menu"),x=t(".main-nav");O.addEventListener("click",(function(){x.classList.toggle("active"),k.classList.toggle("active"),O.classList.toggle("active")})),i.addEventListener("click",(function(t){s.contains(t.target)||i.classList.toggle("active")})),document.addEventListener("click",(function(t){i.contains(t.target)||s.contains(t.target)||i.classList.remove("active")}));var A=0,w=JSON.parse(localStorage.getItem("totalAmount"))||0,C=125*w,I=JSON.parse(localStorage.getItem("cartTotalAmount"))||0,J=JSON.parse(localStorage.getItem("cartTotalPrice"))||0;0===I&&(l.classList.add("hidden"),v.classList.add("hidden"),d.classList.remove("hidden")),h.textContent=w,y.textContent=I,u.textContent=I,f.textContent="$".concat(J),o.forEach((function(t){t.src=S[A]})),o.forEach((function(t){t.addEventListener("click",(function(){c.classList.add("active")}))})),a.addEventListener("click",(function(){c.classList.remove("active")})),r.forEach((function(t,e){t.addEventListener("click",(function(){r.forEach((function(t){return t.classList.remove("active")})),t.classList.add("active");var n=t.src.replace("-thumbnail","");console.log(n),o.forEach((function(t){t.src=n})),A=e}))})),E.forEach((function(t){t.addEventListener("click",(function(){A<S.length-1&&A++,o.forEach((function(t){t.src=S[A]})),r.forEach((function(t){o.forEach((function(e){e.src===t.src.replace("-thumbnail","")?t.classList.add("active"):t.classList.remove("active")}))}))}))})),b.forEach((function(t){t.addEventListener("click",(function(){A>0&&A--,o.forEach((function(t){t.src=S[A]})),r.forEach((function(t){o.forEach((function(e){e.src===t.src.replace("-thumbnail","")?t.classList.add("active"):t.classList.remove("active")}))}))}))})),p.addEventListener("click",(function(){w++,C=125*w,h.textContent=w,localStorage.setItem("totalAmount",JSON.stringify(w))})),g.addEventListener("click",(function(){w>0&&(w--,C=125*w,h.textContent=w,localStorage.setItem("totalAmount",JSON.stringify(w)))})),m.addEventListener("click",(function(){I=0,J=0,localStorage.setItem("cartTotalAmount",JSON.stringify(I)),localStorage.setItem("cartTotalPrice",JSON.stringify(J)),y.textContent=I,l.classList.add("hidden"),v.classList.add("hidden"),d.classList.remove("hidden"),localStorage.setItem("totalAmount",JSON.stringify(w))})),L.addEventListener("click",(function(){I=w,J=C,localStorage.setItem("cartTotalAmount",JSON.stringify(I)),localStorage.setItem("cartTotalPrice",JSON.stringify(J)),y.textContent=I,u.textContent=I,f.textContent="$".concat(J),I>0&&(l.classList.remove("hidden"),v.classList.remove("hidden"),d.classList.add("hidden")),0===I&&(l.classList.add("hidden"),v.classList.add("hidden"),d.classList.remove("hidden"))}))}))}},n={};function r(t){var o=n[t];if(void 0!==o)return o.exports;var c=n[t]={exports:{}};return e[t](c,c.exports,r),c.exports}r.m=e,t=[],r.O=function(e,n,o,c){if(!n){var a=1/0;for(d=0;d<t.length;d++){n=t[d][0],o=t[d][1],c=t[d][2];for(var i=!0,s=0;s<n.length;s++)(!1&c||a>=c)&&Object.keys(r.O).every((function(t){return r.O[t](n[s])}))?n.splice(s--,1):(i=!1,c<a&&(a=c));if(i){t.splice(d--,1);var l=o();void 0!==l&&(e=l)}}return e}c=c||0;for(var d=t.length;d>0&&t[d-1][2]>c;d--)t[d]=t[d-1];t[d]=[n,o,c]},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){var t={793:0,79:0};r.O.j=function(e){return 0===t[e]};var e=function(e,n){var o,c,a=n[0],i=n[1],s=n[2],l=0;if(a.some((function(e){return 0!==t[e]}))){for(o in i)r.o(i,o)&&(r.m[o]=i[o]);if(s)var d=s(r)}for(e&&e(n);l<a.length;l++)c=a[l],r.o(t,c)&&t[c]&&t[c][0](),t[c]=0;return r.O(d)},n=self.webpackChunksample_projects=self.webpackChunksample_projects||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var o=r.O(void 0,[79],(function(){return r(839)}));o=r.O(o)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ay9ydW50aW1lL2NodW5rIGxvYWRlZCIsIndlYnBhY2s6Ly9zYW1wbGUtcHJvamVjdHMvLi9zcmMvc2NyaXB0cy9saWJqcy9mdW5jdGlvbnMuanMiLCJ3ZWJwYWNrOi8vc2FtcGxlLXByb2plY3RzLy4vc3JjL3NjcmlwdHMvZmVtL2ZlbS1pbnQtZWNvbW1lcmNlLmpzIiwid2VicGFjazovL3NhbXBsZS1wcm9qZWN0cy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9zYW1wbGUtcHJvamVjdHMvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9zYW1wbGUtcHJvamVjdHMvd2VicGFjay9ydW50aW1lL2pzb25wIGNodW5rIGxvYWRpbmciLCJ3ZWJwYWNrOi8vc2FtcGxlLXByb2plY3RzL3dlYnBhY2svc3RhcnR1cCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZGVmZXJyZWQgPSBbXTtcbl9fd2VicGFja19yZXF1aXJlX18uTyA9IGZ1bmN0aW9uKHJlc3VsdCwgY2h1bmtJZHMsIGZuLCBwcmlvcml0eSkge1xuXHRpZihjaHVua0lkcykge1xuXHRcdHByaW9yaXR5ID0gcHJpb3JpdHkgfHwgMDtcblx0XHRmb3IodmFyIGkgPSBkZWZlcnJlZC5sZW5ndGg7IGkgPiAwICYmIGRlZmVycmVkW2kgLSAxXVsyXSA+IHByaW9yaXR5OyBpLS0pIGRlZmVycmVkW2ldID0gZGVmZXJyZWRbaSAtIDFdO1xuXHRcdGRlZmVycmVkW2ldID0gW2NodW5rSWRzLCBmbiwgcHJpb3JpdHldO1xuXHRcdHJldHVybjtcblx0fVxuXHR2YXIgbm90RnVsZmlsbGVkID0gSW5maW5pdHk7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgZGVmZXJyZWQubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgY2h1bmtJZHMgPSBkZWZlcnJlZFtpXVswXTtcblx0XHR2YXIgZm4gPSBkZWZlcnJlZFtpXVsxXTtcblx0XHR2YXIgcHJpb3JpdHkgPSBkZWZlcnJlZFtpXVsyXTtcblx0XHR2YXIgZnVsZmlsbGVkID0gdHJ1ZTtcblx0XHRmb3IgKHZhciBqID0gMDsgaiA8IGNodW5rSWRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRpZiAoKHByaW9yaXR5ICYgMSA9PT0gMCB8fCBub3RGdWxmaWxsZWQgPj0gcHJpb3JpdHkpICYmIE9iamVjdC5rZXlzKF9fd2VicGFja19yZXF1aXJlX18uTykuZXZlcnkoZnVuY3Rpb24oa2V5KSB7IHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLk9ba2V5XShjaHVua0lkc1tqXSk7IH0pKSB7XG5cdFx0XHRcdGNodW5rSWRzLnNwbGljZShqLS0sIDEpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZnVsZmlsbGVkID0gZmFsc2U7XG5cdFx0XHRcdGlmKHByaW9yaXR5IDwgbm90RnVsZmlsbGVkKSBub3RGdWxmaWxsZWQgPSBwcmlvcml0eTtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYoZnVsZmlsbGVkKSB7XG5cdFx0XHRkZWZlcnJlZC5zcGxpY2UoaS0tLCAxKVxuXHRcdFx0dmFyIHIgPSBmbigpO1xuXHRcdFx0aWYgKHIgIT09IHVuZGVmaW5lZCkgcmVzdWx0ID0gcjtcblx0XHR9XG5cdH1cblx0cmV0dXJuIHJlc3VsdDtcbn07IiwiZXhwb3J0IGZ1bmN0aW9uIHNlbGVjdChlbGVtZW50KSB7XHJcbiAgICBjb25zdCBzZWxlY3RlZEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGVsZW1lbnQpO1xyXG4gICAgcmV0dXJuIHNlbGVjdGVkRWxlbWVudDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNlbGVjdEFsbChlbGVtZW50cykge1xyXG4gICAgY29uc3Qgc2VsZWN0ZWRFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoZWxlbWVudHMpO1xyXG4gICAgcmV0dXJuIHNlbGVjdGVkRWxlbWVudHM7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGUoZWxlbWVudCwgdGV4dCA9IG51bGwpIHtcclxuICAgIGNvbnN0IGNyZWF0ZWRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChlbGVtZW50KTtcclxuICAgIGlmICh0ZXh0KSB7XHJcbiAgICAgICAgY3JlYXRlZEVsZW1lbnQudGV4dENvbnRlbnQgPSB0ZXh0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGNyZWF0ZWRFbGVtZW50O1xyXG59XHJcbiIsImltcG9ydCBcIi4uLy4uL3N0eWxlcy9tYWluLmNzc1wiO1xyXG5pbXBvcnQgKiBhcyBmIGZyb20gXCIuLi9saWJqcy9mdW5jdGlvbnNcIjtcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnN0IGJvZHkgPSBmLnNlbGVjdChcImJvZHlcIik7XHJcblxyXG4gICAgY29uc3QgdGh1bWJuYWlscyA9IFsuLi5mLnNlbGVjdEFsbChcIi50aHVtYm5haWwtaW1nXCIpXTtcclxuICAgIGNvbnN0IGxhcmdlSW1hZ2VzID0gZi5zZWxlY3RBbGwoXCIubGFyZ2UtaW1nXCIpO1xyXG5cclxuICAgIGNvbnN0IGxpZ2h0Ym94T3ZlcmxheSA9IGYuc2VsZWN0KFwiLmxpZ2h0Ym94LW92ZXJsYXlcIik7XHJcbiAgICBjb25zdCBsaWdodGJveE5leHRJY29uID0gbGlnaHRib3hPdmVybGF5LnF1ZXJ5U2VsZWN0b3IoXCIubmV4dFwiKTtcclxuICAgIGNvbnN0IGxpZ2h0Ym94cHJldkljb24gPSBsaWdodGJveE92ZXJsYXkucXVlcnlTZWxlY3RvcihcIi5wcmV2XCIpO1xyXG4gICAgY29uc3QgbGlnaHRib3hDbG9zZUljb24gPSBmLnNlbGVjdChcIi5saWdodGJveC1jbG9zZS1pbWdcIik7XHJcblxyXG4gICAgY29uc3QgY2FydFdyYXBwZXIgPSBmLnNlbGVjdChcIi5jYXJ0LXdyYXBwZXJcIik7XHJcbiAgICBjb25zdCBjYXJ0RHJvcGRvd24gPSBmLnNlbGVjdChcIi5jYXJ0LWRyb3Bkb3duXCIpO1xyXG4gICAgY29uc3QgZHJvcGRvd25Db250ZW50ID0gZi5zZWxlY3QoXCIuZHJvcGRvd24tY29udGVudFwiKTtcclxuICAgIGNvbnN0IGRyb3Bkb3duQ29udGVudEVtcHR5ID0gZi5zZWxlY3QoXCIuZHJvcGRvd24tY29udGVudC1lbXB0eVwiKTtcclxuICAgIGNvbnN0IGl0ZW1Ecm9wZG93bkRpc3BsYXkgPSBmLnNlbGVjdChcIi5pdGVtLWRyb3Bkb3duLWRpc3BsYXlcIik7XHJcbiAgICBjb25zdCB0b3RhbFByaWNlRHJvcGRvd25EaXNwbGF5ID0gZi5zZWxlY3QoXCIudG90YWwtcHJpY2UtZHJvcGRvd24tZGlzcGxheVwiKTtcclxuICAgIGNvbnN0IGRyb3Bkb3duRGVsZXRlID0gZi5zZWxlY3QoXCIuZHJvcGRvd24tZGVsZXRlXCIpO1xyXG4gICAgY29uc3QgY2hlY2tvdXQgPSBmLnNlbGVjdChcIi5jaGVja291dFwiKTtcclxuXHJcbiAgICBjb25zdCBwbHVzQnRuID0gZi5zZWxlY3QoXCIucGx1c1wiKTtcclxuICAgIGNvbnN0IG1pbnVzQnRuID0gZi5zZWxlY3QoXCIubWludXNcIik7XHJcbiAgICBjb25zdCBpdGVtQW1vdW50RGlzcGxheSA9IGYuc2VsZWN0KFwiLml0ZW0tYW1vdW50LWRpc3BsYXlcIik7XHJcbiAgICBjb25zdCBhZGRUb0NhcnQgPSBmLnNlbGVjdChcIi5hZGQtdG8tY2FydFwiKTtcclxuICAgIGNvbnN0IGNhcnRCYWRnZSA9IGYuc2VsZWN0KFwiLmNhcnQtYmFkZ2VcIik7XHJcblxyXG4gICAgY29uc3QgbGFyZ2VJbWFnZVNyY3MgPSBbLi4udGh1bWJuYWlscy5tYXAoKHQpID0+IHQuc3JjLnJlcGxhY2UoXCItdGh1bWJuYWlsXCIsIFwiXCIpKV07XHJcblxyXG4gICAgY29uc3QgbmV4dHMgPSBmLnNlbGVjdEFsbChcIi5uZXh0XCIpO1xyXG4gICAgY29uc3QgcHJldnMgPSBmLnNlbGVjdEFsbChcIi5wcmV2XCIpO1xyXG5cclxuICAgIC8vIGhhbWJ1cmdlciB2YXJpYWJsZXNcclxuICAgIGNvbnN0IGhhbWJ1cmdlcldyYXBwZXIgPSBmLnNlbGVjdChcIi5oYW1idXJnZXItd3JhcHBlclwiKTtcclxuICAgIGNvbnN0IG1lbnUgPSBmLnNlbGVjdChcIi5tZW51XCIpO1xyXG4gICAgY29uc3QgbWFpbk5hdiA9IGYuc2VsZWN0KFwiLm1haW4tbmF2XCIpO1xyXG5cclxuICAgIC8vIGhhbWJ1cmdlciBmdW5jdGlvblxyXG4gICAgaGFtYnVyZ2VyV3JhcHBlci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIG1haW5OYXYuY2xhc3NMaXN0LnRvZ2dsZShcImFjdGl2ZVwiKTtcclxuICAgICAgICBtZW51LmNsYXNzTGlzdC50b2dnbGUoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgaGFtYnVyZ2VyV3JhcHBlci5jbGFzc0xpc3QudG9nZ2xlKFwiYWN0aXZlXCIpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gZHJvcGRvd24gZnVuY2lvblxyXG4gICAgY2FydFdyYXBwZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcbiAgICAgICAgaWYgKGNhcnREcm9wZG93bi5jb250YWlucyhlLnRhcmdldCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXJ0V3JhcHBlci5jbGFzc0xpc3QudG9nZ2xlKFwiYWN0aXZlXCIpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgaWYgKCFjYXJ0V3JhcHBlci5jb250YWlucyhlLnRhcmdldCkgJiYgIWNhcnREcm9wZG93bi5jb250YWlucyhlLnRhcmdldCkpIHtcclxuICAgICAgICAgICAgY2FydFdyYXBwZXIuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBpbml0aWFsIGluZGV4Zm9yIGxhcmdlIGltYWdlXHJcbiAgICBsZXQgbGFyZ2VJbWFnZVNyY3NJbmRleCA9IDA7XHJcbiAgICBsZXQgdG90YWxBbW91bnQgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidG90YWxBbW91bnRcIikpIHx8IDA7XHJcbiAgICBsZXQgdG90YWxQcmljZSA9IHRvdGFsQW1vdW50ICogMTI1O1xyXG5cclxuICAgIGxldCBjYXJ0VG90YWxBbW91bnQgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiY2FydFRvdGFsQW1vdW50XCIpKSB8fCAwO1xyXG4gICAgbGV0IGNhcnRUb3RhbFByaWNlID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImNhcnRUb3RhbFByaWNlXCIpKSB8fCAwO1xyXG5cclxuICAgIGlmIChjYXJ0VG90YWxBbW91bnQgPT09IDApIHtcclxuICAgICAgICBkcm9wZG93bkNvbnRlbnQuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKTtcclxuICAgICAgICBjaGVja291dC5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpO1xyXG4gICAgICAgIGRyb3Bkb3duQ29udGVudEVtcHR5LmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIik7XHJcbiAgICB9XHJcblxyXG4gICAgaXRlbUFtb3VudERpc3BsYXkudGV4dENvbnRlbnQgPSB0b3RhbEFtb3VudDtcclxuICAgIGNhcnRCYWRnZS50ZXh0Q29udGVudCA9IGNhcnRUb3RhbEFtb3VudDtcclxuICAgIGl0ZW1Ecm9wZG93bkRpc3BsYXkudGV4dENvbnRlbnQgPSBjYXJ0VG90YWxBbW91bnQ7XHJcbiAgICB0b3RhbFByaWNlRHJvcGRvd25EaXNwbGF5LnRleHRDb250ZW50ID0gYCQke2NhcnRUb3RhbFByaWNlfWA7XHJcblxyXG4gICAgLy8gaW5pdGlhbCBkaXNwbGF5IGZvciBsYXJnZSBpbWFnZXNcclxuXHJcbiAgICBsYXJnZUltYWdlcy5mb3JFYWNoKChsYXJnZUltYWdlKSA9PiB7XHJcbiAgICAgICAgbGFyZ2VJbWFnZS5zcmMgPSBsYXJnZUltYWdlU3Jjc1tsYXJnZUltYWdlU3Jjc0luZGV4XTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIGRpc3BsYXkgbGlnaGJveFxyXG4gICAgbGFyZ2VJbWFnZXMuZm9yRWFjaCgobGFyZ2VJbWFnZSkgPT4ge1xyXG4gICAgICAgIGxhcmdlSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgbGlnaHRib3hPdmVybGF5LmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBjbG9zZSBsaWdodGJveFxyXG4gICAgbGlnaHRib3hDbG9zZUljb24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICBsaWdodGJveE92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIGNsaWNrIGV2ZW50IGZvciB0aHVtYm5haWwgdG8gY29udHJvbGwgbGFyZ2UgaW1hZ2VcclxuICAgIHRodW1ibmFpbHMuZm9yRWFjaCgodGh1bWJuYWlsLCBpbmRleCkgPT4ge1xyXG4gICAgICAgIHRodW1ibmFpbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aHVtYm5haWxzLmZvckVhY2goKHQpID0+IHQuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKSk7XHJcbiAgICAgICAgICAgIHRodW1ibmFpbC5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgbGFyZ2VJbWFnZVNyYyA9IHRodW1ibmFpbC5zcmMucmVwbGFjZShcIi10aHVtYm5haWxcIiwgXCJcIik7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGxhcmdlSW1hZ2VTcmMpO1xyXG5cclxuICAgICAgICAgICAgbGFyZ2VJbWFnZXMuZm9yRWFjaCgobGFyZ2VJbWFnZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGFyZ2VJbWFnZS5zcmMgPSBsYXJnZUltYWdlU3JjO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGxhcmdlSW1hZ2VTcmNzSW5kZXggPSBpbmRleDtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIGxhcmdlIGltYWdlIG5hdmlnYXRpb24gZm9yIG5leHRcclxuICAgIG5leHRzLmZvckVhY2goKG5leHQpID0+IHtcclxuICAgICAgICBuZXh0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChsYXJnZUltYWdlU3Jjc0luZGV4IDwgbGFyZ2VJbWFnZVNyY3MubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgICAgICAgbGFyZ2VJbWFnZVNyY3NJbmRleCsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxhcmdlSW1hZ2VzLmZvckVhY2goKGxhcmdlSW1hZ2UpID0+IHtcclxuICAgICAgICAgICAgICAgIGxhcmdlSW1hZ2Uuc3JjID0gbGFyZ2VJbWFnZVNyY3NbbGFyZ2VJbWFnZVNyY3NJbmRleF07XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGh1bWJuYWlscy5mb3JFYWNoKCh0aHVtYm5haWwpID0+IHtcclxuICAgICAgICAgICAgICAgIGxhcmdlSW1hZ2VzLmZvckVhY2goKGxhcmdlSW1hZ2UpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobGFyZ2VJbWFnZS5zcmMgPT09IHRodW1ibmFpbC5zcmMucmVwbGFjZShcIi10aHVtYm5haWxcIiwgXCJcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGh1bWJuYWlsLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGh1bWJuYWlsLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICAvLyBsYXJnZSBpbWFnZSBuYXZpZ2F0aW9uIGZvciBwcmV2aW91c1xyXG4gICAgcHJldnMuZm9yRWFjaCgocHJldikgPT4ge1xyXG4gICAgICAgIHByZXYuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgaWYgKGxhcmdlSW1hZ2VTcmNzSW5kZXggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBsYXJnZUltYWdlU3Jjc0luZGV4LS07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbGFyZ2VJbWFnZXMuZm9yRWFjaCgobGFyZ2VJbWFnZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGFyZ2VJbWFnZS5zcmMgPSBsYXJnZUltYWdlU3Jjc1tsYXJnZUltYWdlU3Jjc0luZGV4XTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aHVtYm5haWxzLmZvckVhY2goKHRodW1ibmFpbCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGFyZ2VJbWFnZXMuZm9yRWFjaCgobGFyZ2VJbWFnZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChsYXJnZUltYWdlLnNyYyA9PT0gdGh1bWJuYWlsLnNyYy5yZXBsYWNlKFwiLXRodW1ibmFpbFwiLCBcIlwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHVtYm5haWwuY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHVtYm5haWwuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBJdGVtIGFtb3VudCBpbmNyZWFtZW50XHJcbiAgICBwbHVzQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgdG90YWxBbW91bnQrKztcclxuICAgICAgICB0b3RhbFByaWNlID0gdG90YWxBbW91bnQgKiAxMjU7XHJcbiAgICAgICAgaXRlbUFtb3VudERpc3BsYXkudGV4dENvbnRlbnQgPSB0b3RhbEFtb3VudDtcclxuXHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ0b3RhbEFtb3VudFwiLCBKU09OLnN0cmluZ2lmeSh0b3RhbEFtb3VudCkpO1xyXG4gICAgfSk7XHJcbiAgICAvLyBJdGVtIGFtb3VudCBkZWNyZWFtZW50XHJcbiAgICBtaW51c0J0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIGlmICh0b3RhbEFtb3VudCA+IDApIHtcclxuICAgICAgICAgICAgdG90YWxBbW91bnQtLTtcclxuICAgICAgICAgICAgdG90YWxQcmljZSA9IHRvdGFsQW1vdW50ICogMTI1O1xyXG4gICAgICAgICAgICBpdGVtQW1vdW50RGlzcGxheS50ZXh0Q29udGVudCA9IHRvdGFsQW1vdW50O1xyXG5cclxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ0b3RhbEFtb3VudFwiLCBKU09OLnN0cmluZ2lmeSh0b3RhbEFtb3VudCkpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgLy8gZHJvcGRvd24gZGVsZXRlXHJcbiAgICBkcm9wZG93bkRlbGV0ZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIGNhcnRUb3RhbEFtb3VudCA9IDA7XHJcbiAgICAgICAgY2FydFRvdGFsUHJpY2UgPSAwO1xyXG5cclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImNhcnRUb3RhbEFtb3VudFwiLCBKU09OLnN0cmluZ2lmeShjYXJ0VG90YWxBbW91bnQpKTtcclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImNhcnRUb3RhbFByaWNlXCIsIEpTT04uc3RyaW5naWZ5KGNhcnRUb3RhbFByaWNlKSk7XHJcbiAgICAgICAgY2FydEJhZGdlLnRleHRDb250ZW50ID0gY2FydFRvdGFsQW1vdW50O1xyXG4gICAgICAgIGRyb3Bkb3duQ29udGVudC5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpO1xyXG4gICAgICAgIGNoZWNrb3V0LmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIik7XHJcbiAgICAgICAgZHJvcGRvd25Db250ZW50RW1wdHkuY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKTtcclxuXHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ0b3RhbEFtb3VudFwiLCBKU09OLnN0cmluZ2lmeSh0b3RhbEFtb3VudCkpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgYWRkVG9DYXJ0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgY2FydFRvdGFsQW1vdW50ID0gdG90YWxBbW91bnQ7XHJcbiAgICAgICAgY2FydFRvdGFsUHJpY2UgPSB0b3RhbFByaWNlO1xyXG5cclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImNhcnRUb3RhbEFtb3VudFwiLCBKU09OLnN0cmluZ2lmeShjYXJ0VG90YWxBbW91bnQpKTtcclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImNhcnRUb3RhbFByaWNlXCIsIEpTT04uc3RyaW5naWZ5KGNhcnRUb3RhbFByaWNlKSk7XHJcblxyXG4gICAgICAgIGNhcnRCYWRnZS50ZXh0Q29udGVudCA9IGNhcnRUb3RhbEFtb3VudDtcclxuICAgICAgICBpdGVtRHJvcGRvd25EaXNwbGF5LnRleHRDb250ZW50ID0gY2FydFRvdGFsQW1vdW50O1xyXG4gICAgICAgIHRvdGFsUHJpY2VEcm9wZG93bkRpc3BsYXkudGV4dENvbnRlbnQgPSBgJCR7Y2FydFRvdGFsUHJpY2V9YDtcclxuXHJcbiAgICAgICAgaWYgKGNhcnRUb3RhbEFtb3VudCA+IDApIHtcclxuICAgICAgICAgICAgZHJvcGRvd25Db250ZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIik7XHJcbiAgICAgICAgICAgIGNoZWNrb3V0LmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIik7XHJcbiAgICAgICAgICAgIGRyb3Bkb3duQ29udGVudEVtcHR5LmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY2FydFRvdGFsQW1vdW50ID09PSAwKSB7XHJcbiAgICAgICAgICAgIGRyb3Bkb3duQ29udGVudC5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpO1xyXG4gICAgICAgICAgICBjaGVja291dC5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpO1xyXG4gICAgICAgICAgICBkcm9wZG93bkNvbnRlbnRFbXB0eS5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59KTtcclxuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbi8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBfX3dlYnBhY2tfbW9kdWxlc19fO1xuXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmosIHByb3ApIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApOyB9IiwiLy8gbm8gYmFzZVVSSVxuXG4vLyBvYmplY3QgdG8gc3RvcmUgbG9hZGVkIGFuZCBsb2FkaW5nIGNodW5rc1xuLy8gdW5kZWZpbmVkID0gY2h1bmsgbm90IGxvYWRlZCwgbnVsbCA9IGNodW5rIHByZWxvYWRlZC9wcmVmZXRjaGVkXG4vLyBbcmVzb2x2ZSwgcmVqZWN0LCBQcm9taXNlXSA9IGNodW5rIGxvYWRpbmcsIDAgPSBjaHVuayBsb2FkZWRcbnZhciBpbnN0YWxsZWRDaHVua3MgPSB7XG5cdDc5MzogMCxcblx0Nzk6IDBcbn07XG5cbi8vIG5vIGNodW5rIG9uIGRlbWFuZCBsb2FkaW5nXG5cbi8vIG5vIHByZWZldGNoaW5nXG5cbi8vIG5vIHByZWxvYWRlZFxuXG4vLyBubyBITVJcblxuLy8gbm8gSE1SIG1hbmlmZXN0XG5cbl9fd2VicGFja19yZXF1aXJlX18uTy5qID0gZnVuY3Rpb24oY2h1bmtJZCkgeyByZXR1cm4gaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID09PSAwOyB9O1xuXG4vLyBpbnN0YWxsIGEgSlNPTlAgY2FsbGJhY2sgZm9yIGNodW5rIGxvYWRpbmdcbnZhciB3ZWJwYWNrSnNvbnBDYWxsYmFjayA9IGZ1bmN0aW9uKHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uLCBkYXRhKSB7XG5cdHZhciBjaHVua0lkcyA9IGRhdGFbMF07XG5cdHZhciBtb3JlTW9kdWxlcyA9IGRhdGFbMV07XG5cdHZhciBydW50aW1lID0gZGF0YVsyXTtcblx0Ly8gYWRkIFwibW9yZU1vZHVsZXNcIiB0byB0aGUgbW9kdWxlcyBvYmplY3QsXG5cdC8vIHRoZW4gZmxhZyBhbGwgXCJjaHVua0lkc1wiIGFzIGxvYWRlZCBhbmQgZmlyZSBjYWxsYmFja1xuXHR2YXIgbW9kdWxlSWQsIGNodW5rSWQsIGkgPSAwO1xuXHRpZihjaHVua0lkcy5zb21lKGZ1bmN0aW9uKGlkKSB7IHJldHVybiBpbnN0YWxsZWRDaHVua3NbaWRdICE9PSAwOyB9KSkge1xuXHRcdGZvcihtb2R1bGVJZCBpbiBtb3JlTW9kdWxlcykge1xuXHRcdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKG1vcmVNb2R1bGVzLCBtb2R1bGVJZCkpIHtcblx0XHRcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tW21vZHVsZUlkXSA9IG1vcmVNb2R1bGVzW21vZHVsZUlkXTtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYocnVudGltZSkgdmFyIHJlc3VsdCA9IHJ1bnRpbWUoX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cdH1cblx0aWYocGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24pIHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uKGRhdGEpO1xuXHRmb3IoO2kgPCBjaHVua0lkcy5sZW5ndGg7IGkrKykge1xuXHRcdGNodW5rSWQgPSBjaHVua0lkc1tpXTtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oaW5zdGFsbGVkQ2h1bmtzLCBjaHVua0lkKSAmJiBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0pIHtcblx0XHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXVswXSgpO1xuXHRcdH1cblx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSAwO1xuXHR9XG5cdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLk8ocmVzdWx0KTtcbn1cblxudmFyIGNodW5rTG9hZGluZ0dsb2JhbCA9IHNlbGZbXCJ3ZWJwYWNrQ2h1bmtzYW1wbGVfcHJvamVjdHNcIl0gPSBzZWxmW1wid2VicGFja0NodW5rc2FtcGxlX3Byb2plY3RzXCJdIHx8IFtdO1xuY2h1bmtMb2FkaW5nR2xvYmFsLmZvckVhY2god2VicGFja0pzb25wQ2FsbGJhY2suYmluZChudWxsLCAwKSk7XG5jaHVua0xvYWRpbmdHbG9iYWwucHVzaCA9IHdlYnBhY2tKc29ucENhbGxiYWNrLmJpbmQobnVsbCwgY2h1bmtMb2FkaW5nR2xvYmFsLnB1c2guYmluZChjaHVua0xvYWRpbmdHbG9iYWwpKTsiLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGRlcGVuZHMgb24gb3RoZXIgbG9hZGVkIGNodW5rcyBhbmQgZXhlY3V0aW9uIG5lZWQgdG8gYmUgZGVsYXllZFxudmFyIF9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fLk8odW5kZWZpbmVkLCBbNzldLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oODM5KTsgfSlcbl9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fLk8oX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4iXSwibmFtZXMiOlsiZGVmZXJyZWQiLCJzZWxlY3QiLCJlbGVtZW50IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwic2VsZWN0QWxsIiwiZWxlbWVudHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiYWRkRXZlbnRMaXN0ZW5lciIsImYiLCJ0aHVtYm5haWxzIiwiX3RvQ29uc3VtYWJsZUFycmF5IiwibGFyZ2VJbWFnZXMiLCJsaWdodGJveE92ZXJsYXkiLCJsaWdodGJveENsb3NlSWNvbiIsImNhcnRXcmFwcGVyIiwiY2FydERyb3Bkb3duIiwiZHJvcGRvd25Db250ZW50IiwiZHJvcGRvd25Db250ZW50RW1wdHkiLCJpdGVtRHJvcGRvd25EaXNwbGF5IiwidG90YWxQcmljZURyb3Bkb3duRGlzcGxheSIsImRyb3Bkb3duRGVsZXRlIiwiY2hlY2tvdXQiLCJwbHVzQnRuIiwibWludXNCdG4iLCJpdGVtQW1vdW50RGlzcGxheSIsImFkZFRvQ2FydCIsImNhcnRCYWRnZSIsImxhcmdlSW1hZ2VTcmNzIiwibWFwIiwidCIsInNyYyIsInJlcGxhY2UiLCJuZXh0cyIsInByZXZzIiwiaGFtYnVyZ2VyV3JhcHBlciIsIm1lbnUiLCJtYWluTmF2IiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiZSIsImNvbnRhaW5zIiwidGFyZ2V0IiwicmVtb3ZlIiwibGFyZ2VJbWFnZVNyY3NJbmRleCIsInRvdGFsQW1vdW50IiwiSlNPTiIsInBhcnNlIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInRvdGFsUHJpY2UiLCJjYXJ0VG90YWxBbW91bnQiLCJjYXJ0VG90YWxQcmljZSIsImFkZCIsInRleHRDb250ZW50IiwiY29uY2F0IiwiZm9yRWFjaCIsImxhcmdlSW1hZ2UiLCJ0aHVtYm5haWwiLCJpbmRleCIsImxhcmdlSW1hZ2VTcmMiLCJjb25zb2xlIiwibG9nIiwibmV4dCIsImxlbmd0aCIsInByZXYiLCJzZXRJdGVtIiwic3RyaW5naWZ5IiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJtIiwiTyIsInJlc3VsdCIsImNodW5rSWRzIiwiZm4iLCJwcmlvcml0eSIsIm5vdEZ1bGZpbGxlZCIsIkluZmluaXR5IiwiaSIsImZ1bGZpbGxlZCIsImoiLCJPYmplY3QiLCJrZXlzIiwiZXZlcnkiLCJrZXkiLCJzcGxpY2UiLCJyIiwibyIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJpbnN0YWxsZWRDaHVua3MiLCJjaHVua0lkIiwid2VicGFja0pzb25wQ2FsbGJhY2siLCJwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbiIsImRhdGEiLCJtb3JlTW9kdWxlcyIsInJ1bnRpbWUiLCJzb21lIiwiaWQiLCJjaHVua0xvYWRpbmdHbG9iYWwiLCJzZWxmIiwiYmluZCIsInB1c2giLCJfX3dlYnBhY2tfZXhwb3J0c19fIl0sInNvdXJjZVJvb3QiOiIifQ==